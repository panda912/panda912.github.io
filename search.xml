<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[åç¼–è¯‘ jar åŒ…ä¿®æ”¹ä»£ç åŽé‡æ–°æ‰“åŒ…]]></title>
      <url>%2F2017%2F05%2F10%2F%E5%8F%8D%E7%BC%96%E8%AF%91-jar-%E5%8C%85%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81%E5%90%8E%E9%87%8D%E6%96%B0%E6%89%93%E5%8C%85%2F</url>
      <content type="text"><![CDATA[å®šä½è¦ä¿®æ”¹çš„ç±»ï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼ŒåŒ…åä¸Ž jar åŒ…åä¸€è‡´ï¼Œæ–°å»ºåŒåçš„ç±»ï¼Œå°† class ä¸­çš„ä»£ç æ‹·è´è¿›åŽ»ï¼Œç„¶åŽå°† jar åŒ…ä¸­è¦ä¿®æ”¹çš„ç±»åˆ é™¤ï¼Œå°†åˆ é™¤åŽçš„ç±»çš„ jar åŒ…æ·»åŠ åˆ°æ–°çš„å·¥ç¨‹ä¸­ï¼Œé‡æ–°ç¼–è¯‘ï¼Œå°†ç¼–è¯‘åŽçš„ class æ–‡ä»¶æ‹·è´åˆ° jar åŒ…ä¸­ï¼Œoverï¼ ä¸¾ä¸ªæ —å­ï¼š çŽ°åœ¨å¦‚æžœè¦ä¿®æ”¹ udesk jar åŒ…ä¸­çš„ eã€fã€gã€hã€lã€UdeskHttpFacade.class æ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ï¼ŒåŒ…åä¸€è‡´ï¼Œæ–°å»ºéœ€è¦ä¿®æ”¹çš„åŒåçš„ç±»æ–‡ä»¶ï¼Œå°†ä»£ç æ‹·è´è¿›åŽ» åˆ é™¤åŽŸ jar åŒ…ä¸­éœ€è¦ä¿®æ”¹çš„ class æ–‡ä»¶ï¼Œå°†æ–°çš„ jar åŒ…æ”¾è¿›æ–°çš„å·¥ç¨‹ libs ä¸‹ ä¿®æ”¹éœ€è¦ä¿®æ”¹çš„ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿæ­£ç¡®ç¼–è¯‘ï¼Œç¼–è¯‘ä¹‹åŽæ‹·è´ç”Ÿæˆå¯¹åº”çš„ class æ–‡ä»¶ï¼Œæ”¾è¿›æ–°çš„ jar åŒ…ä¸­ PS: mac ä¸‹æ²¡æœ‰æ‰¾åˆ°å¯ä»¥ç›´æŽ¥åˆ é™¤ jar ä¸­çš„ class æ–‡ä»¶çš„å·¥å…·ï¼Œåœ¨ windows ä¸‹å¯ä»¥ç›´æŽ¥ç”¨ winrar æ‰“å¼€ï¼Œç›´æŽ¥åˆ é™¤æˆ–è€…æ·»åŠ  class æ–‡ä»¶ã€‚ PS: å¦‚æžœåç¼–è¯‘ä¿®æ”¹ç±»ä¼¼ Activity è¿™æ ·æ¶‰åŠåˆ°èµ„æºæ–‡ä»¶çš„ class æ–‡ä»¶ï¼Œéœ€è¦åœ¨åŽŸå·¥ç¨‹ä¸­æ–°å»ºåŒ…ååŽ»ä¿®æ”¹ï¼Œå¦‚æžœåœ¨æ–°çš„å·¥ç¨‹ä¸­ä¿®æ”¹ï¼Œç”Ÿæˆçš„èµ„æº id ä¸Žåœ¨åŽŸå·¥ç¨‹ä¸­ä¸ä¸€è‡´ï¼Œå¯¼è‡´å‘ç”Ÿé”™è¯¯ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidå„å¤§ç›´æ’­SDKåˆ†æž]]></title>
      <url>%2F2017%2F04%2F26%2FAndroid%E5%90%84%E5%A4%A7%E7%9B%B4%E6%92%ADSDK%E5%88%86%E6%9E%90%2F</url>
      <content type="text"><![CDATA[1. ç™¾åº¦äº‘éŸ³è§†é¢‘ç›´æ’­ LSS:2. ä¸ƒç‰›ç›´æ’­äº‘ï¼šPili ç›´æ’­ SDK https://github.com/pili-engineering/PLDroidMediaStreaming https://github.com/pili-engineering/PLDroidPlayer 3. è…¾è®¯äº‘ç›´æ’­ï¼š4. é˜¿é‡Œäº‘è§†é¢‘ç›´æ’­ï¼š5. è¶£æ‹äº‘ï¼š6. é‡‘å±±äº‘ï¼šhttps://github.com/ksvc/KSYLive_Android https://github.com/ksvc/KSYMediaPlayer_Android éŸ³è§†é¢‘é‡‡é›†ã€æŽ¨æµã€æ’­æ”¾å…è´¹ï¼Œäº‘å­˜å‚¨ã€CDN åˆ†å‘ã€åŠ¨æ€è´´çº¸ã€è¿žéº¦ã€ç¬¬ä¸‰æ–¹ç¾Žé¢œç­‰æ”¶è´¹ã€‚ 7. å³æž„ï¼šå®¢æˆ·æ¡ˆä¾‹ï¼šèŠ±æ¤’ç›´æ’­ã€æ˜ å®¢ç›´æ’­ç­‰ 8. EasyDarwinï¼šhttps://github.com/EasyDarwin/EasyDarwin å¼€æº+å•†ä¸š 9. å¤§ç‰›ç›´æ’­ï¼šhttps://github.com/daniulive/SmarterStreaming SmarterStreaming SDKå¯ä¾›ä¸ªäººå­¦ä¹ ä¹‹ç”¨ï¼Œä¼ä¸šåŠå•†ç”¨éœ€è¦ç»è¿‡æŽˆæƒ 10. æ¥ç–¯ç›´æ’­å¼€æºé¡¹ç›®ï¼šhttps://github.com/LaiFeng-Android/SopCastComponent 11. yaseaï¼šhttps://github.com/begeekmyfriend/yasea RTMP live streaming client for Android è½¯ç¡¬è§£ç ï¼Œæœ¬åœ°è®°å½•ï¼Œæ»¤é•œ 12. EvilsLive:https://github.com/ThinkKeep/EvilsLive è§†é¢‘é‡‡é›†ã€æŽ¨æµã€é¢„è§ˆã€æ’­æ”¾ã€ç¾Žå›¾ Android Studio &gt;= 2.2.3Android API &gt;= 19 [x] è§†é¢‘ç¼–ç ï¼šH.264 [x] æŽ¨æµåè®®ï¼šRTMP [x] é¢„è§ˆä¸ŽæŽ¨æµåˆ†è¾¨çŽ‡å¯åˆ†åˆ«è‡ªç”±è®¾ç½® [x] æ”¯æŒå‰ã€åŽç½®æ‘„åƒå¤´åŠ¨æ€åˆ‡æ¢ [ ] æ”¯æŒè½¯ç¼–ã€ç¡¬ç¼–åŠè½¯ç¼–å…¼å®¹æ¨¡å¼ [ ] ç½‘ç»œè‡ªé€‚åº”ï¼Œå¯æ ¹æ®å®žé™…ç½‘ç»œæƒ…å†µåŠ¨æ€è°ƒæ•´ç›®æ ‡ç çŽ‡ï¼Œä¿è¯æµç•…æ€§ [ ] éŸ³é¢‘ç¼–ç ï¼šAAC [ ] æ”¯æŒåŠ¨æ€æ¨ªç«–å±æŽ¨æµ [ ] éŸ³è§†é¢‘ç›®æ ‡ç çŽ‡ï¼šå¯è®¾]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¤šå±‚å¾ªçŽ¯ç›´æŽ¥è·³å‡ºæœ€å¤–å±‚å¾ªçŽ¯]]></title>
      <url>%2F2017%2F04%2F21%2F%E5%A4%9A%E5%B1%82%E5%BE%AA%E7%8E%AF%E7%9B%B4%E6%8E%A5%E8%B7%B3%E5%87%BA%E6%9C%80%E5%A4%96%E5%B1%82%E5%BE%AA%E7%8E%AF%2F</url>
      <content type="text"><![CDATA[BoringLayout.java ä¸­çš„ä»£ç ç‰‡æ®µ: 123456789101112131415161718192021222324252627282930313233outer:for (int start = 0; start &lt; textLength; start += MAX_BUF_LEN) &#123; final int end = Math.min(start + MAX_BUF_LEN, textLength); // No need to worry about getting half codepoints, since we reject surrogate code units // as non-boring as soon we see one. TextUtils.getChars(text, start, end, buffer, 0); final int len = end - start; for (int i = 0; i &lt; len; i++) &#123; final char c = buffer[i]; if (c == '\n' || c == '\t' || (c &gt;= 0x0590 &amp;&amp; c &lt;= 0x08FF) || // RTL scripts c == 0x200F || // Bidi format character (c &gt;= 0x202A &amp;&amp; c &lt;= 0x202E) || // Bidi format characters (c &gt;= 0x2066 &amp;&amp; c &lt;= 0x2069) || // Bidi format characters (c &gt;= 0xD800 &amp;&amp; c &lt;= 0xDFFF) || // surrogate pairs (c &gt;= 0xFB1D &amp;&amp; c &lt;= 0xFDFF) || // Hebrew and Arabic presentation forms (c &gt;= 0xFE70 &amp;&amp; c &lt;= 0xFEFE) // Arabic presentation forms ) &#123; boring = false; break outer; &#125; &#125; // TODO: This looks a little suspicious, and in some cases can result in O(n^2) // run time. Consider moving outside the loop. if (textDir != null &amp;&amp; textDir.isRtl(buffer, 0, len)) &#123; boring = false; break outer; &#125;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ubuntu å¸¸ç”¨å‘½ä»¤]]></title>
      <url>%2F2017%2F02%2F16%2Fubuntu-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
      <content type="text"><![CDATA[1dpkg -l | grep -i &quot;keyword&quot; 1sudo apt remove --purge XXX 1sudo apt autoremove 1wget &quot;http://xxxxx.zip&quot; 1uname -a 1uname -r 1top 1pidof xxx 1pkill xxx 1killall xxx 1sudo fdisk -l 1sudo umount /dev/sdb 1sudo dd if=xxx.iso of=/dev/sdb 1sudo dd if=xxx.iso of=/dev/sdb bs=2M]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Androidå¤šçº¿ç¨‹ä¹‹AsyncTask]]></title>
      <url>%2F2017%2F02%2F10%2FAndroid%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B9%8BAsyncTask%2F</url>
      <content type="text"><![CDATA[AsyncTask çš„æºç æ³¨é‡Šä¸è¦å†™çš„å¤ªè¯¦ç»†å“¦ã€‚ AsyncTask enables proper and easy use of the UI thread. This class allows to perform background operations and publish results on the UI thread without having to manipulate threads and/or handlers. AsyncTask is designed to be a helper class around Thread and Handler and does not constitute a generic threading framework. AsyncTasks should ideally be used for short operations (a few seconds at the most.) If you need to keep threads running for long periods of time,it is highly recommended you use the various APIs provided by the java.util.concurrent package such as Executor, ThreadPoolExecutor and FutureTask. An asynchronous task is defined by a computation that runs on a background thread and whose result is published on the UI thread. An asynchronous task is defined by 3 generic types, called Params, Progress and Result, and 4 steps, called onPreExecute, doInBackground, onProgressUpdate and onPostExecute. Developer GuidesFor more information about using tasks and threads, read the Processes and Threads developer guide. UsageAsyncTask must be subclassed to be used. The subclass will override at least one method (doInBackground(Params...)), and most often will override a second one (onPostExecute(Result).) Here is an example of subclassing: 123456789101112131415161718192021private class DownloadFilesTask extends AsyncTask&lt;URL, Integer, Long&gt; &#123; protected Long doInBackground(URL... urls) &#123; int count = urls.length; long totalSize = 0; for (int i = 0; i &lt; count; i++) &#123; totalSize += Downloader.downloadFile(urls[i]); publishProgress((int) ((i / (float) count) * 100)); // Escape early if cancel() is called if (isCancelled()) break; &#125; return totalSize; &#125; protected void onProgressUpdate(Integer... progress) &#123; setProgressPercent(progress[0]); &#125; protected void onPostExecute(Long result) &#123; showDialog("Downloaded " + result + " bytes"); &#125;&#125; Once created, a task is executed very simply: 1new DownloadFilesTask().execute(url1, url2, url3); AsyncTaskâ€™s generic typesThe three types used by an asynchronous task are the following: Params, the type of the parameters sent to the task upon execution. Progress, the type of the progress units published during the background computation. Result, the type of the result of the background computation. Not all types are always used by an asynchronous task. To mark a type as unused, simply use the type Void: private class MyTask extends AsyncTask { â€¦ } The 4 stepsWhen an asynchronous task is executed, the task goes through 4 steps: onPreExecute(), invoked on the UI thread before the task is executed. This step is normally used to setup the task, for instance by showing a progress bar in the user interface. doInBackground(Params...), invoked on the background thread immediately after onPreExecute() finishes executing. This step is used to perform background computation that can take a long time. The parameters of the asynchronous task are passed to this step. The result of the computation must be returned by this step and will be passed back to the last step. This step can also use publishProgress(Progress...) to publish one or more units of progress. These values are published on the UI thread, in the onProgressUpdate(Progress...) step. onProgressUpdate(Progress...), invoked on the UI thread after a call to publishProgress(Progress...). The timing of the execution is undefined. This method is used to display any form of progress in the user interface while the background computation is still executing. For instance, it can be used to animate a progress bar or show logs in a text field. onPostExecute(Result), invoked on the UI thread after the background computation finishes. The result of the background computation is passed to this step as a parameter. Cancelling a taskA task can be cancelled at any time by invoking cancel(boolean). Invoking this method will cause subsequent calls to isCancelled() to return true. After invoking this method, onCancelled(Object), instead of onPostExecute(Object) will be invoked after doInBackground(Object[]) returns. To ensure that a task is cancelled as quickly as possible, you should always check the return value of isCancelled() periodically from doInBackground(Object[]), if possible (inside a loop for instance.) Threading rulesThere are a few threading rules that must be followed for this class to work properly: The AsyncTask class must be loaded on the UI thread. This is done automatically as of JELLY_BEAN. The task instance must be created on the UI thread. execute(Params...) must be invoked on the UI thread. Do not call onPreExecute(), onPostExecute(Result), doInBackground(Params...), onProgressUpdate(Progress...) manually. The task can be executed only once (an exception will be thrown if a second execution is attempted.) Memory observabilityAsyncTask guarantees that all callback calls are synchronized in such a way that the following operations are safe without explicit synchronizations. Set member fields in the constructor or onPreExecute(), and refer to them in doInBackground(Params...). Set member fields in doInBackground(Params...), and refer to them in onProgressUpdate(Progress...) and onPostExecute(Result). Order of executionWhen first introduced, AsyncTasks were executed serially on a single background thread. Starting with DONUT, this was changed to a pool of threads allowing multiple tasks to operate in parallel. Starting with HONEYCOMB, tasks are executed on a single thread to avoid common application errors caused by parallel execution. If you truly want parallel execution, you can invoke executeOnExecutor(java.util.concurrent.Executor, Object[]) with THREAD_POOL_EXECUTOR.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Android ä¹‹ Handleræœºåˆ¶æµ…æž]]></title>
      <url>%2F2017%2F02%2F06%2FAndroid-%E4%B9%8B-Handler%E6%9C%BA%E5%88%B6%E6%B5%85%E6%9E%90%2F</url>
      <content type="text"><![CDATA[å…³äºŽ Handler çš„ç”¨æ³•ç›¸ä¿¡å¤§å®¶éƒ½åº”è¯¥çŸ¥é“ï¼Œæ¯”å¦‚è¿™æ ·ï¼š 123456789101112131415161718192021222324252627282930313233343536public class HandlerActivity extends AppCompatActivity &#123; private MyHandler mHandler; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_handler); mHandler = new MyHandler(this); mHandler.sendMessage(mHandler.obtainMessage(0, "hello"));// Message message = Message.obtain();// message.what = 0;// message.obj = "hello world";// mHandler.sendMessage(message); &#125; private static class MyHandler extends Handler &#123; WeakReference&lt;Activity&gt; mActivity; MyHandler(Activity activity) &#123; mActivity = new WeakReference&lt;&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; switch (msg.what) &#123; case 0: Toast.makeText(mActivity.get(), (String) msg.obj, Toast.LENGTH_SHORT).show(); break; default: break; &#125; &#125; &#125;&#125; æˆ‘ä»¬ä»Ž Handler çš„æž„é€ æ–¹æ³•å¼€å§‹çœ‹èµ·ï¼š 12345678910111213141516171819202122232425262728/** * Use the &#123;@link Looper&#125; for the current thread with the specified callback interface * and set whether the handler should be asynchronous. * * Handlers are synchronous by default unless this constructor is used to make * one that is strictly asynchronous. * * Asynchronous messages represent interrupts or events that do not require global ordering * with respect to synchronous messages. Asynchronous messages are not subject to * the synchronization barriers introduced by &#123;@link MessageQueue#enqueueSyncBarrier(long)&#125;. * * @param callback The callback interface in which to handle messages, or null. * @param async If true, the handler calls &#123;@link Message#setAsynchronous(boolean)&#125; for * each &#123;@link Message&#125; that is sent to it or &#123;@link Runnable&#125; that is posted to it. * * @hide */public Handler(Callback callback, boolean async) &#123; //...... mLooper = Looper.myLooper(); if (mLooper == null) &#123; throw new RuntimeException( "Can't create handler inside thread that has not called Looper.prepare()"); &#125; mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async;&#125; å…ˆè°ƒç”¨äº† Looper.myLooper() èµ‹ç»™ mLooperï¼Œç‚¹è¿›åŽ»çœ‹çœ‹ myLooper() æ–¹æ³•çš„å®žçŽ°ï¼š 1234567/** * Return the Looper object associated with the current thread. Returns * null if the calling thread is not associated with a Looper. */public static @Nullable Looper myLooper() &#123; return sThreadLocal.get();&#125; å¾ˆç®€å•ï¼Œè¿”å›žä¸€ä¸ªä¸Žå½“å‰çº¿ç¨‹ç›¸å…³è”çš„ Looper å¯¹è±¡ã€‚å¦‚æžœè°ƒç”¨çº¿ç¨‹æ²¡æœ‰ä¸Ž Looper å…³è”åˆ™è¿”å›ž nullã€‚é‚£æ€Žä¹ˆå…³è”å‘¢ï¼Ÿå¾€ä¸‹çœ‹ã€‚ èŽ·å–åˆ° Looper ä¹‹åŽè°ƒç”¨ mLooper.mQueue èŽ·å–åˆ°å½“å‰çº¿ç¨‹å…³è”çš„ Looper ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ— mQueueã€‚ Looper ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ— mQueue æ˜¯åœ¨ Looper çš„æž„é€ æ–¹æ³•ä¸­åˆ›å»ºçš„ï¼š 1234private Looper(boolean quitAllowed) &#123; mQueue = new MessageQueue(quitAllowed); mThread = Thread.currentThread();&#125; è€Œ Looper çš„æž„é€ æ–¹æ³•æ˜¯åœ¨å“ªå„¿è°ƒç”¨çš„å‘¢ï¼Ÿçœ‹ prepare() æ–¹æ³•ï¼š 12345678910111213141516 /** Initialize the current thread as a looper. * This gives you a chance to create handlers that then reference * this looper, before actually starting the loop. Be sure to call * &#123;@link #loop()&#125; after calling this method, and end it by calling * &#123;@link #quit()&#125;. */public static void prepare() &#123; prepare(true);&#125;private static void prepare(boolean quitAllowed) &#123; if (sThreadLocal.get() != null) &#123; throw new RuntimeException("Only one Looper may be created per thread"); &#125; sThreadLocal.set(new Looper(quitAllowed));&#125; å½“ prepare() æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šåˆå§‹åŒ–ä¸€ä¸ª Looper å¯¹è±¡å¹¶ä¸Žå½“å‰çº¿ç¨‹å…³è”èµ·æ¥ï¼Œè€Œ Looper ä¸­ç»´æŠ¤ç€ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ— MessageQueue ã€‚ å½“æˆ‘ä»¬ new ä¸€ä¸ª Handler ä¹‹åŽï¼Œè°ƒç”¨ sendMessage(message) æ–¹æ³•æˆ–è€…æ˜¯ sendXXX ç­‰ç­‰è¯¸å¦‚æ­¤ç±»çš„æ–¹æ³•å‘é€æ¶ˆæ¯ï¼Œ æœ€åŽéƒ½ä¼šèµ°åˆ° sendMessageAtTime è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œç‚¹è¿›åŽ»çœ‹çœ‹å®ƒçš„å®žçŽ°ï¼š 12345678910public boolean sendMessageAtTime(Message msg, long uptimeMillis) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + " sendMessageAtTime() called with no mQueue"); Log.w("Looper", e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, uptimeMillis);&#125; å¦‚æžœ queue ä¸ä¸º null ï¼Œè°ƒç”¨ enqueueMessage æ–¹æ³•ï¼Œå†ç‚¹è¿›åŽ»çœ‹çœ‹å®žçŽ°ï¼š 1234567private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) &#123; msg.target = this; if (mAsynchronous) &#123; msg.setAsynchronous(true); &#125; return queue.enqueueMessage(msg, uptimeMillis);&#125; åœ¨è¿™é‡ŒæŠŠ this èµ‹ç»™äº† msg.targetï¼Œè¿™é‡Œçš„this å°±æ˜¯å½“å‰çš„ handler å¯¹è±¡ï¼ŒMessage ä¸­çš„ target å°±æ˜¯ Handlerï¼Œåœ¨è¿™é‡Œå°±æŠŠ Handler å’Œ Message å…³è”èµ·æ¥äº†ï¼Œç„¶åŽè°ƒç”¨ MessageQueue ä¸­çš„ enqueueMessage æ–¹æ³•ï¼ŒæŠŠå½“å‰çš„æ¶ˆæ¯ä¼ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­åŽ»ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253boolean enqueueMessage(Message msg, long when) &#123; if (msg.target == null) &#123; throw new IllegalArgumentException("Message must have a target."); &#125; if (msg.isInUse()) &#123; throw new IllegalStateException(msg + " This message is already in use."); &#125; synchronized (this) &#123; if (mQuitting) &#123; IllegalStateException e = new IllegalStateException( msg.target + " sending message to a Handler on a dead thread"); Log.w(TAG, e.getMessage(), e); msg.recycle(); return false; &#125; msg.markInUse(); msg.when = when; Message p = mMessages; boolean needWake; if (p == null || when == 0 || when &lt; p.when) &#123; // New head, wake up the event queue if blocked. msg.next = p; mMessages = msg; needWake = mBlocked; &#125; else &#123; // Inserted within the middle of the queue. Usually we don't have to wake // up the event queue unless there is a barrier at the head of the queue // and the message is the earliest asynchronous message in the queue. needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous(); Message prev; for (;;) &#123; prev = p; p = p.next; if (p == null || when &lt; p.when) &#123; break; &#125; if (needWake &amp;&amp; p.isAsynchronous()) &#123; needWake = false; &#125; &#125; msg.next = p; // invariant: p == prev.next prev.next = msg; &#125; // We can assume mPtr != 0 because mQuitting is false. if (needWake) &#123; nativeWake(mPtr); &#125; &#125; return true;&#125; æ¶ˆæ¯å·²ç»å‘å‡ºåŽ»äº†ï¼Œé‚£ä¹ˆåœ¨å“ªå„¿æŽ¥æ”¶å‘¢ï¼Ÿ è°ƒç”¨ Looper.loop() æ¥å¾ªçŽ¯æ¶ˆæ¯é˜Ÿåˆ—ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * Run the message queue in this thread. Be sure to call * &#123;@link #quit()&#125; to end the loop. */public static void loop() &#123; final Looper me = myLooper(); if (me == null) &#123; throw new RuntimeException("No Looper; Looper.prepare() wasn't called on this thread."); &#125; final MessageQueue queue = me.mQueue; // Make sure the identity of this thread is that of the local process, // and keep track of what that identity token actually is. Binder.clearCallingIdentity(); final long ident = Binder.clearCallingIdentity(); for (;;) &#123; Message msg = queue.next(); // might block if (msg == null) &#123; // No message indicates that the message queue is quitting. return; &#125; // This must be in a local variable, in case a UI event sets the logger final Printer logging = me.mLogging; if (logging != null) &#123; logging.println("&gt;&gt;&gt;&gt;&gt; Dispatching to " + msg.target + " " + msg.callback + ": " + msg.what); &#125; final long traceTag = me.mTraceTag; if (traceTag != 0 &amp;&amp; Trace.isTagEnabled(traceTag)) &#123; Trace.traceBegin(traceTag, msg.target.getTraceName(msg)); &#125; try &#123; msg.target.dispatchMessage(msg); &#125; finally &#123; if (traceTag != 0) &#123; Trace.traceEnd(traceTag); &#125; &#125; if (logging != null) &#123; logging.println("&lt;&lt;&lt;&lt;&lt; Finished to " + msg.target + " " + msg.callback); &#125; // Make sure that during the course of dispatching the // identity of the thread wasn't corrupted. final long newIdent = Binder.clearCallingIdentity(); if (ident != newIdent) &#123; Log.wtf(TAG, "Thread identity changed from 0x" + Long.toHexString(ident) + " to 0x" + Long.toHexString(newIdent) + " while dispatching to " + msg.target.getClass().getName() + " " + msg.callback + " what=" + msg.what); &#125; msg.recycleUnchecked(); &#125;&#125; çœ‹36è¡Œï¼Œè°ƒç”¨äº† msg.target.dispatchMessage(msg) ï¼Œmsg.target å°±æ˜¯ Handler ï¼Œå°±æ˜¯è°ƒç”¨äº† Handler çš„ dispatchMessage æ–¹æ³•æ¥åˆ†å‘æ¶ˆæ¯çš„ï¼š 123456789101112131415/** * Handle system messages here. */public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125;&#125; msg.callback æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸€ä¸ª Runnable ï¼Œå¦‚æžœæŒ‡å®šäº† Message çš„ callback ï¼Œé‚£å°±èµ° handleCallback(msg)ï¼š 123private static void handleCallback(Message message) &#123; message.callback.run();&#125; å¦åˆ™ï¼Œå¦‚æžœ mCallback != null ï¼Œåˆ™æ‰§è¡Œ mCallback.handleMessage(msg) ï¼š 12345678910/** * Callback interface you can use when instantiating a Handler to avoid * having to implement your own subclass of Handler. * * @param msg A &#123;@link android.os.Message Message&#125; object * @return True if no further handling is desired */public interface Callback &#123; public boolean handleMessage(Message msg);&#125; å¦‚æžœ mCallback.handleMessage(msg) è¿”å›ž trueï¼Œåˆ™æ‰§è¡Œå®Œæ¯•ï¼Œå¦åˆ™ï¼Œå†æ‰§è¡Œæœ€åŽçš„ handleMessage(msg) ï¼š 12345/** * Subclasses must implement this to receive messages. */public void handleMessage(Message msg) &#123;&#125; è¿™ä¸ª handleMessage å°±æ˜¯æˆ‘ä»¬åˆ›å»º Handler çš„æ—¶å€™é‡å†™çš„é‚£ä¸ª handleMessage ï¼Œé‡å†™è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†æŽ¥å—åˆ°æ¶ˆæ¯åŽçš„é€»è¾‘ï¼š 12345678910111213private Handler mHandler = new Handler() &#123; @Override public void handleMessage(Message msg) &#123; //TODO &#125;&#125;;//æˆ–è€…private static class MyHandler extends Handler &#123; @Override public void handleMessage(Message msg) &#123; //TODO &#125;&#125; åˆ°æ­¤ï¼Œæ•´ä¸ªæµç¨‹å°±èµ°å®Œäº†ï¼Œæ•´ç†ä¸€ä¸‹ï¼š Looper.prepare() ï¼šè°ƒç”¨ Looper.prepare() çš„æ—¶å€™åˆ›å»ºä¸€ä¸ªåŒ…å« MessageQueue çš„ Looper å¯¹è±¡ä¸Žå½“å‰çº¿ç¨‹å…³è”ï¼› new Handler() ï¼šåœ¨æž„é€ æ–¹æ³•ä¸­é€šè¿‡ Looper.myLooper() èŽ·å–å½“å‰çº¿ç¨‹çš„ Looper å¯¹è±¡ï¼Œç„¶åŽèŽ·å–äº† Looper ä¸­çš„ MessageQueueï¼› è°ƒç”¨ sendXXX() : ä¼šè°ƒç”¨ enqueueMessage() ,æŠŠå½“å‰ Handler å®žä¾‹èµ‹ç»™ Message çš„ target ï¼Œæœ€ç»ˆè°ƒç”¨ MessageQueue çš„ enqueueMessage() ,æŠŠè¿™ä¸ª Message æ”¾è¿›æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼› è°ƒç”¨ Looper.loop() å¾ªçŽ¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œmsg.target.dispatchMessage(msg) åˆ†å‘æ¶ˆæ¯ï¼› æ¶ˆæ¯å¤„ç†ã€‚ æœ‰äººæœ‰ç–‘é—®æˆ‘ä»¬å¹¶æ²¡æœ‰è°ƒç”¨ Looper.prepare() å’Œ Looper.loop() ï¼Œé‚£æ˜¯å› ä¸ºåœ¨ ActivityThread çš„ main æ–¹æ³•ä¸­å·²ç»ä¸ºæˆ‘ä»¬å†™å¥½äº†ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940public static void main(String[] args) &#123; Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, "ActivityThreadMain"); SamplingProfilerIntegration.start(); // CloseGuard defaults to true and can be quite spammy. We // disable it here, but selectively enable it later (via // StrictMode) on debug builds, but using DropBox, not logs. CloseGuard.setEnabled(false); Environment.initForCurrentUser(); // Set the reporter for event logging in libcore EventLogger.setReporter(new EventLoggingReporter()); // Make sure TrustedCertificateStore looks in the right place for CA certificates final File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId()); TrustedCertificateStore.setDefaultUserDirectory(configDir); Process.setArgV0("&lt;pre-initialized&gt;"); Looper.prepareMainLooper(); ActivityThread thread = new ActivityThread(); thread.attach(false); if (sMainThreadHandler == null) &#123; sMainThreadHandler = thread.getHandler(); &#125; if (false) &#123; Looper.myLooper().setMessageLogging(new LogPrinter(Log.DEBUG, "ActivityThread")); &#125; // End of event ActivityThreadMain. Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); Looper.loop(); throw new RuntimeException("Main thread loop unexpectedly exited");&#125; åœ¨21è¡Œè°ƒç”¨äº† Looper.prepareMainLooper() ï¼š 123456789public static void prepareMainLooper() &#123; prepare(false); synchronized (Looper.class) &#123; if (sMainLooper != null) &#123; throw new IllegalStateException("The main Looper has already been prepared."); &#125; sMainLooper = myLooper(); &#125;&#125; åˆ›å»ºäº†å”¯ä¸€çš„ sMainLooper å®žä¾‹ï¼Œç„¶åŽåœ¨37è¡Œè°ƒç”¨äº† Looper.loop() ã€‚ï¼ˆPSï¼šæ‰€ä»¥åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ Looper.myLooper() å’Œ Looper.getMainLooper()æ˜¯ä¸€æ ·çš„ï¼‰ å…³äºŽ Handler çš„ post() ï¼š 123456new Handler().postDelayed(new Runnable() &#123; @Override public void run() &#123; //TODO &#125;&#125;, 2000); 123public final boolean post(Runnable r) &#123; return sendMessageDelayed(getPostMessage(r), 0);&#125; é€šè¿‡ getPostMessage åˆ›å»ºä¸€ä¸ª Message ï¼Œå¹¶æŠŠ runnable ä¼ ç»™äº† Message çš„ callback ï¼š 12345private static Message getPostMessage(Runnable r) &#123; Message m = Message.obtain(); m.callback = r; return m;&#125; ç„¶åŽè°ƒç”¨ sendMessageXXX -&gt; sendMessageAtTime -&gt; enqueueMessage -&gt; MessageQueue enqueueMessage â€¦â€¦ åŽé¢æµç¨‹éƒ½ä¸€æ ·äº†ï¼Œç„¶åŽåœ¨ dispatchMessage çš„æ—¶å€™ï¼Œå› ä¸º msg.callback != null ,æ‰€ä»¥å°±æ‰§è¡Œäº† handleCallback(msg) ï¼š 123private static void handleCallback(Message message) &#123; message.callback.run();&#125; å°±æ˜¯æ‰§è¡Œäº† Runnable çš„ run() ã€‚ å®Œæ¯•ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Android LayoutTransition åŸºæœ¬ç”¨æ³•]]></title>
      <url>%2F2017%2F01%2F22%2FAndroid-LayoutTransition-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%2F</url>
      <content type="text"><![CDATA[ç®€ä»‹LayoutTransitionæ˜¯åœ¨ API11 çš„æ—¶å€™å¼•å…¥çš„ï¼Œç”¨æ¥è®¾ç½®å½“å¸ƒå±€å‘ç”Ÿå˜åŒ–æ—¶çš„åŠ¨ç”»æ•ˆæžœã€‚æœ‰æ—¶å€™å½“æˆ‘ä»¬addViewã€removeView æˆ–è€…è®¾ç½® View çš„ GONEã€VISIBLE æ—¶ï¼Œä¸æƒ³è®©å¸ƒå±€çš„å˜åŒ–æ˜¾å¾—å¾ˆçªå…€ï¼Œæƒ³æœ‰ä¸€ä¸ªè¿‡æ¸¡çš„æ•ˆæžœï¼Œå°±åœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­è®¾ç½®android:animateLayoutChanges=&quot;true&quot;å±žæ€§ï¼Œè¿™ä¸ªå±žæ€§å°±æ˜¯ç”¨åˆ°äº†LayoutTransitionã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å®˜æ–¹æä¾›çš„é»˜è®¤çš„åŠ¨ç”»æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼š å…ˆä»ŽViewGroupçš„æž„é€ æ–¹æ³•ä¸­çœ‹èµ·: 12345public ViewGroup(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; super(context, attrs, defStyleAttr, defStyleRes); initViewGroup(); initFromAttributes(context, attrs, defStyleAttr, defStyleRes);&#125; ç‚¹è¿›åŽ»initFromAttributesæ–¹æ³•ï¼š 1234567891011121314151617181920212223private void initFromAttributes( Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ViewGroup, defStyleAttr, defStyleRes); final int N = a.getIndexCount(); for (int i = 0; i &lt; N; i++) &#123; int attr = a.getIndex(i); switch (attr) &#123; case ...... case ...... case R.styleable.ViewGroup_animateLayoutChanges: boolean animateLayoutChanges = a.getBoolean(attr, false); if (animateLayoutChanges) &#123; setLayoutTransition(new LayoutTransition()); &#125; break; case ...... case ...... &#125; &#125; a.recycle();&#125; å¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬è®¾ç½®android:animateLayoutChanges=&quot;true&quot;çš„æ—¶å€™ï¼Œå…¶å®žå°±æ˜¯è°ƒç”¨äº†setLayoutTransition(new LayoutTransition());è®¾ç½®é»˜è®¤çš„åŠ¨ç”»æ•ˆæžœã€‚æˆ‘ä»¬ä»Šå¤©ä¸»è¦æ¥çœ‹çœ‹LayoutTransitionè¿™ä¸ªç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536public LayoutTransition() &#123; if (defaultChangeIn == null) &#123; // "left" is just a placeholder; we'll put real properties/values in when needed PropertyValuesHolder pvhLeft = PropertyValuesHolder.ofInt("left", 0, 1); PropertyValuesHolder pvhTop = PropertyValuesHolder.ofInt("top", 0, 1); PropertyValuesHolder pvhRight = PropertyValuesHolder.ofInt("right", 0, 1); PropertyValuesHolder pvhBottom = PropertyValuesHolder.ofInt("bottom", 0, 1); PropertyValuesHolder pvhScrollX = PropertyValuesHolder.ofInt("scrollX", 0, 1); PropertyValuesHolder pvhScrollY = PropertyValuesHolder.ofInt("scrollY", 0, 1); defaultChangeIn = ObjectAnimator.ofPropertyValuesHolder((Object)null, pvhLeft, pvhTop, pvhRight, pvhBottom, pvhScrollX, pvhScrollY); defaultChangeIn.setDuration(DEFAULT_DURATION); defaultChangeIn.setStartDelay(mChangingAppearingDelay); defaultChangeIn.setInterpolator(mChangingAppearingInterpolator); defaultChangeOut = defaultChangeIn.clone(); defaultChangeOut.setStartDelay(mChangingDisappearingDelay); defaultChangeOut.setInterpolator(mChangingDisappearingInterpolator); defaultChange = defaultChangeIn.clone(); defaultChange.setStartDelay(mChangingDelay); defaultChange.setInterpolator(mChangingInterpolator); defaultFadeIn = ObjectAnimator.ofFloat(null, "alpha", 0f, 1f); defaultFadeIn.setDuration(DEFAULT_DURATION); defaultFadeIn.setStartDelay(mAppearingDelay); defaultFadeIn.setInterpolator(mAppearingInterpolator); defaultFadeOut = ObjectAnimator.ofFloat(null, "alpha", 1f, 0f); defaultFadeOut.setDuration(DEFAULT_DURATION); defaultFadeOut.setStartDelay(mDisappearingDelay); defaultFadeOut.setInterpolator(mDisappearingInterpolator); &#125; mChangingAppearingAnim = defaultChangeIn; mChangingDisappearingAnim = defaultChangeOut; mChangingAnim = defaultChange; mAppearingAnim = defaultFadeIn; mDisappearingAnim = defaultFadeOut;&#125; åœ¨LayoutTransitionçš„æž„é€ æ–¹æ³•ä¸­ç»™æˆ‘ä»¬å®žçŽ°å¥½äº†é»˜è®¤çš„åŠ¨ç”»æ•ˆæžœï¼Œæ€»å…±åŒ…å«4ä¸­åŠ¨ç”»æ•ˆæžœï¼Œåˆ†åˆ«æ˜¯ï¼š APPEARINGï¼šViewå‡ºçŽ°åŠ¨ç”»ï¼Œå½“Viewåœ¨çˆ¶å®¹å™¨ä¸­å‡ºçŽ°æ—¶å€™çš„åŠ¨ç”»ï¼› DISAPPEARINGï¼šViewæ¶ˆå¤±åŠ¨ç”»ï¼Œå½“Viewåœ¨çˆ¶å®¹å™¨ä¸­æ¶ˆå¤±æ—¶å€™çš„åŠ¨ç”»ï¼› CHANGE_APPEARINGï¼šç”±äºŽæŸäº›Viewå‡ºçŽ°åœ¨çˆ¶å®¹å™¨ä¸­æ—¶ï¼Œå®¹å™¨ä¸­å…¶ä»–çš„Viewè€Œå‘ç”Ÿå˜åŒ–æ—¶çš„åŠ¨ç”»ï¼› CHANGE_DISAPPEARINGï¼šç”±äºŽæŸäº›Viewåœ¨çˆ¶å®¹å™¨ä¸­æ¶ˆå¤±æ—¶ï¼Œå®¹å™¨ä¸­å…¶ä»–çš„Viewè€Œå‘ç”Ÿå˜åŒ–æ—¶çš„åŠ¨ç”»ã€‚ æˆ‘ä»¬å¯ä»¥è°ƒç”¨setAnimatorç»™LayoutTransitionåˆ†åˆ«è®¾ç½®è¿™äº›åŠ¨ç”»ã€‚ ä»£ç ç‰‡æ®µ12345678910111213141516171819LayoutTransition layoutTransition = new LayoutTransition();mContentLL.setLayoutTransition(layoutTransition);//AppearingPropertyValuesHolder pvhAppearingTranslation = PropertyValuesHolder.ofFloat("translationX", 800, 0);PropertyValuesHolder pvhAppearingAlpha = PropertyValuesHolder.ofFloat("alpha", 0, 1);PropertyValuesHolder pvhAppearingScaleX = PropertyValuesHolder.ofFloat("scaleX", 0, 1);PropertyValuesHolder pvhAppearingScaleY = PropertyValuesHolder.ofFloat("scaleY", 0, 1);PropertyValuesHolder pvhAppearingRotationX = PropertyValuesHolder.ofFloat("rotationX", 0, 360);ObjectAnimator appearingAnimator = ObjectAnimator.ofPropertyValuesHolder((Object) null, pvhAppearingTranslation, pvhAppearingAlpha, pvhAppearingScaleX, pvhAppearingScaleY, pvhAppearingRotationX);//DisappearingPropertyValuesHolder pvhDisappearingTranslation = PropertyValuesHolder.ofFloat("translationX", 0, 800);PropertyValuesHolder pvhDisappearingAlpha = PropertyValuesHolder.ofFloat("alpha", 1, 0);PropertyValuesHolder pvhDisappearingScaleY = PropertyValuesHolder.ofFloat("scaleY", 1, 0);ObjectAnimator disappearingAnimator = ObjectAnimator.ofPropertyValuesHolder((Object) null, pvhDisappearingTranslation, pvhDisappearingAlpha, pvhDisappearingScaleY);layoutTransition.setAnimator(LayoutTransition.APPEARING, appearingAnimator);layoutTransition.setInterpolator(LayoutTransition.APPEARING, new OvershootInterpolator());layoutTransition.setDuration(LayoutTransition.APPEARING, 1200);layoutTransition.setAnimator(LayoutTransition.DISAPPEARING, disappearingAnimator);]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scroller åŸºæœ¬ç”¨æ³•]]></title>
      <url>%2F2017%2F01%2F20%2FScroller-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%2F</url>
      <content type="text"><![CDATA[Scrolleræ˜¯ä»€ä¹ˆï¼š Scrolleræ˜¯ä¸€ä¸ªç”¨æ¥è¾…åŠ©Viewæ»šåŠ¨çš„å·¥å…·ç±»ã€‚å®ƒæœ¬èº«å¹¶ä¸èƒ½å¤ŸæŽ§åˆ¶ View çš„æ»šåŠ¨ï¼Œå®ƒåªæ˜¯ç”¨æ¥è¾…åŠ©æ»šåŠ¨çš„ã€‚ å°æ˜Žï¼šä»€ä¹ˆæ„æ€ï¼Œæˆ‘è‡ªå·±å°±å¯ä»¥è®© View æ»šåŠ¨å•Šï¼Œä¸ºä»€ä¹ˆè¿˜è¦å®ƒæ¥è¾…åŠ©æˆ‘ï¼Ÿ è€å¸ˆé—®å°æ˜Žï¼šåœ¨ä¸€ä¸ª ViewGroup ä¸­æŠŠ A ç‚¹çš„ä¸€ä¸ª View æ‹‰åˆ° B ç‚¹ï¼Œæ¾æ‰‹ä¹‹åŽæ€Žä¹ˆè®©è¿™ä¸ª View å†å›žåˆ° A ç‚¹å‘¢ï¼Ÿå¥¥ï¼Œä¸å¯¹ï¼Œæ˜¯å¹³æ»‘çš„æ»šåŠ¨åˆ° A ç‚¹ã€‚ å°æ˜Žæƒ³äº†æƒ³ï¼šå¯ä»¥ä½¿ç”¨åŠ¨ç”»ï¼ è€å¸ˆï¼šé™¤äº†åŠ¨ç”»è¿˜æœ‰ä»€ä¹ˆåŠžæ³•å‘¢ï¼Ÿ å°æ˜Žï¼šä¸çŸ¥é“äº†ã€‚ è€å¸ˆï¼šï¼ˆå˜»å˜»ï¼‰å¯ä»¥ç”¨ Scrollerã€‚ è¿™é‡Œä¸ºä»€ä¹ˆå¼ºè°ƒæ¾æ‰‹ä¹‹åŽï¼Œè¿™å°±å¯ä»¥è§£é‡Š Scroller æ˜¯ç”¨æ¥è¾…åŠ© View åšæ»šåŠ¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å®ƒæ¥è®© View æ»šåŠ¨ã€‚æ¯”æ–¹è¯´æˆ‘ä»¬è§¦æ‘¸ä¸€ä¸ª Viewï¼Œæ¾æ‰‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨onTouchEventé‡Œç”¨scrollToæˆ–scrollByæ¥æŽ§åˆ¶ View çš„æ»šåŠ¨ï¼Œå½“æ¾æ‰‹ä¹‹åŽå°±å¯ä»¥ä½¿ç”¨ Scroller çš„ startScrollæ–¹æ³•ï¼Œè®¾ç½® View çš„Xè½´å’ŒYè½´æ–¹å‘ä¸Šçš„åç§»åæ ‡ï¼ˆè¿™ä¸ªåç§»åæ ‡ä»¥ View çš„å·¦ä¸Šæ–¹åœ¨çˆ¶æŽ§ä»¶çš„åæ ‡ç³»ä¸­ä¸ºå‡†ï¼‰ä»¥åŠå¯¹åº”æ–¹å‘ä¸Šæƒ³è¦æ»šåŠ¨çš„è·ç¦»ã€‚ PSï¼šscrollToå’ŒscrollByéƒ½å¯ä»¥æ»šåŠ¨ View ä¸­çš„å†…å®¹ï¼View ä¸­çš„å†…å®¹ï¼View ä¸­çš„å†…å®¹ï¼ä¸æ˜¯æ»šåŠ¨ View è‡ªèº«ã€‚ä½†æ˜¯ä¸¤è€…åˆæœ‰åŒºåˆ«ï¼Œçœ‹æºç ï¼š 1234567891011121314151617181920/** * Set the scrolled position of your view. This will cause a call to * &#123;@link #onScrollChanged(int, int, int, int)&#125; and the view will be * invalidated. * @param x the x position to scroll to * @param y the y position to scroll to */public void scrollTo(int x, int y) &#123; if (mScrollX != x || mScrollY != y) &#123; int oldX = mScrollX; int oldY = mScrollY; mScrollX = x; mScrollY = y; invalidateParentCaches(); onScrollChanged(mScrollX, mScrollY, oldX, oldY); if (!awakenScrollBars()) &#123; postInvalidateOnAnimation(); &#125; &#125;&#125; 12345678910/** * Move the scrolled position of your view. This will cause a call to * &#123;@link #onScrollChanged(int, int, int, int)&#125; and the view will be * invalidated. * @param x the amount of pixels to scroll by horizontally * @param y the amount of pixels to scroll by vertically */public void scrollBy(int x, int y) &#123; scrollTo(mScrollX + x, mScrollY + y);&#125; scrollTo ä¸­ç›´æŽ¥å°†ä¼ å…¥çš„æ–°çš„Xè½´å’ŒYè½´çš„åç§»åæ ‡ä¸Žå½“å‰çš„åç§»åæ ‡æ¯”è¾ƒï¼Œå¦‚æžœä¸åŒï¼Œåˆ™ç›´æŽ¥èµ‹å€¼ç»™äº†mScrollXå’ŒmScrollYï¼Œæ‰€ä»¥è°ƒç”¨å¤šæ¬¡scrollToåªä¼šå‘ç”Ÿä¸€æ¬¡ä½ç½®çš„å˜åŒ–ï¼Œè€Œè°ƒç”¨å¤šæ¬¡ scrollBy åˆ™ä¼šæ”¹å˜å¤šæ¬¡ï¼Œæ¯ä¸€æ¬¡ä»¥ä¸Šä¸€æ¬¡çš„åç§»åæ ‡ä¸ºåŸºå‡†ã€‚ å°æ˜Žï¼šè€å¸ˆä½ bbåŠå¤©ï¼Œåˆ°åº•æ€Žä¹ˆæ ·èƒ½æ»šåŠ¨å•Šï¼Ÿ è€å¸ˆï¼šè‡ªå®šä¹‰ ViewGroup é‡å†™computeScrollæ–¹æ³•ï¼Œåœ¨computeScrollä¸­å®žçŽ°æ»šåŠ¨ã€‚computeScrollæ˜¯ View ç±»ä¸­çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ç©ºçš„ï¼Œå¹¶æ²¡æœ‰ä»»ä½•å®žçŽ°ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿå­—é¢æ„æ€å°±æ˜¯è®¡ç®—æ»šåŠ¨ã€‚æˆ‘ä»¬çœ‹çœ‹æºç ï¼š 12345678/** * Called by a parent to request that a child update its values for mScrollX * and mScrollY if necessary. This will typically be done if the child is * animating a scroll using a &#123;@link android.widget.Scroller Scroller&#125; * object. */public void computeScroll() &#123;&#125; æ³¨é‡Šæ„æ€å¤§æ¦‚æ˜¯ï¼šå¦‚æžœéœ€è¦çš„è¯ï¼Œçˆ¶æŽ§ä»¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è¯·æ±‚å­æŽ§ä»¶æ›´æ–°mScrollXå’ŒmScrollYçš„å€¼ï¼Œå¦‚æžœå­æŽ§ä»¶æ˜¯ä½¿ç”¨ Scroller æ¥æ‰§è¡ŒåŠ¨ç”»æ»šåŠ¨ï¼Œé€šå¸¸ä¼šè¿™æ ·åšã€‚ é‚£æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œè¿™æ ·å†™ï¼š 1234567@Overridepublic void computeScroll() &#123; if (mScroller.computeScrollOffset()) &#123; scrollTo(mScroller.getCurrX(), mScroller.getCurrY()); invalidate(); &#125;&#125; è®¡ç®—æ»šåŠ¨åç§»é‡ï¼ŒèŽ·å–æœ€æ–°çš„åç§»åæ ‡å¹¶è®¾ç½®åˆ°scrollToä¸­ï¼Œä»¥æ­¤å®žçŽ°æ»šåŠ¨æ•ˆæžœã€‚ 1234567891011/** * Call this when you want to know the new location. If it returns true, * the animation is not yet finished. */ public boolean computeScrollOffset() &#123; if (mFinished) &#123; return false; &#125; ...æ›´æ–°mCurrXå’ŒmCurrYçš„å€¼... return true;&#125; computeScrollOffsetï¼šå½“ä½ æƒ³èŽ·å–æ–°çš„åæ ‡ç‚¹ï¼Œä½ å°±å¯ä»¥è°ƒç”¨å®ƒæ›´æ–°åæ ‡ç‚¹ï¼Œç„¶åŽè°ƒç”¨getCurrXæˆ–getCurrY æ¥èŽ·å–æœ€æ–°çš„åæ ‡ç‚¹ã€‚å¦‚æžœè¿”å›žtrueè¡¨ç¤ºè¿™ä¸ªæ»šåŠ¨åŠ¨ç”»è¿˜æ²¡æœ‰å®Œæˆã€‚ ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œä¸‹é¢ä½¿ç”¨ Scroller å®žçŽ°ä¸€ä¸ª Demoï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160public class PullDownViewGroup extends ViewGroup &#123; private static final String TAG = PullDownViewGroup.class.getSimpleName(); /** * é˜»å°¼ */ private static final float DAMPING = 1.5f; private View mContentView; private View mHeaderView; private Scroller mScroller; private int mTouchSlop; /** * ç¬¬ä¸€æ¬¡è§¦æ‘¸æ—¶çš„åæ ‡ */ private float mDownY; /** * ä¸Šä¸€æ¬¡è§¦å‘ ACTION_MOVE æ—¶çš„åæ ‡ */ private float mLastMoveY; /** * å½“å‰åæ ‡ */ private float mCurDownY; /** * å½“å‰åæ ‡å’Œä¸Šä¸€æ¬¡ move æ—¶çš„è·ç¦» */ private float mDeltaY; private boolean isShowHeader = false; public PullDownViewGroup(Context context) &#123; this(context, null); &#125; public PullDownViewGroup(Context context, AttributeSet attrs) &#123; this(context, attrs, 0); &#125; public PullDownViewGroup(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); mTouchSlop = ViewConfiguration.get(getContext()).getScaledTouchSlop(); mScroller = new Scroller(getContext()); &#125; @Override protected void onFinishInflate() &#123; super.onFinishInflate(); int childCount = getChildCount(); if (childCount == 2) &#123; mHeaderView = getChildAt(0); mContentView = getChildAt(1); &#125; else &#123; throw new InflateException("Must have two children."); &#125; &#125; @Override protected void onSizeChanged(int w, int h, int oldw, int oldh) &#123; super.onSizeChanged(w, h, oldw, oldh); &#125; @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; super.onMeasure(widthMeasureSpec, heightMeasureSpec); measureChildren(widthMeasureSpec, heightMeasureSpec); &#125; @Override protected void onLayout(boolean changed, int l, int t, int r, int b) &#123; mHeaderView.layout(0, -mHeaderView.getMeasuredHeight(), mHeaderView.getMeasuredWidth(), 0); mContentView.layout(0, 0, mContentView.getMeasuredWidth(), mContentView.getMeasuredHeight()); &#125; @Override public boolean onInterceptTouchEvent(MotionEvent ev) &#123; switch (ev.getAction()) &#123; case MotionEvent.ACTION_DOWN: mDownY = ev.getRawY(); break; case MotionEvent.ACTION_MOVE: mLastMoveY = ev.getRawY(); int mRealTouchSlop = (int) Math.abs(mLastMoveY - mDownY); if (mRealTouchSlop &gt; mTouchSlop) &#123; //å½“æ»‘åŠ¨è·ç¦»å¤§äºŽä¸´ç•Œå€¼æ—¶ï¼Œæ‹¦æˆªäº‹ä»¶ï¼ˆä¸è®©äº‹ä»¶ä¼ é€’åˆ°å­æŽ§ä»¶ä¸Šï¼‰ï¼Œäº‹ä»¶ä¼ é€’åˆ°æœ¬ ViewGroup çš„ onTouchEventã€‚ return true; &#125; break; &#125; return super.onInterceptTouchEvent(ev); &#125; @Override public boolean onTouchEvent(MotionEvent event) &#123; switch (event.getAction()) &#123; case MotionEvent.ACTION_DOWN: break; case MotionEvent.ACTION_MOVE: mCurDownY = event.getRawY(); mDeltaY = mCurDownY - mLastMoveY; Log.e(TAG, "mCurDownY:" + mCurDownY + " mLastMoveY:" + mLastMoveY + " mDeltaY:" + mDeltaY + " getScrollY:" + getScrollY()); if ((!isShowHeader &amp;&amp; mDeltaY &lt; 0) || (isShowHeader &amp;&amp; mDeltaY &gt; 0)) &#123; return true; &#125; scrollBy(0, (int) (-mDeltaY / DAMPING)); mLastMoveY = mCurDownY; if (getScrollY() &lt; 0 &amp;&amp; mDeltaY &gt; 0 &amp;&amp; -getScrollY() &gt;= 300 &amp;&amp; !isShowHeader) &#123; //ä¸‹æ‹‰å€’ä¸´ç•Œå€¼ï¼Œåˆ‡æ¢åˆ° headerview invalidate(); isShowHeader = true; mScroller.forceFinished(true); int dy = -mHeaderView.getMeasuredHeight() - getScrollY(); Log.d(TAG, "ä¸‹æ‹‰dy: " + dy); mScroller.startScroll(0, getScrollY(), 0, dy); //ä¸ºä»€ä¹ˆè¦å‡æŽ‰getScrollYï¼Ÿå› ä¸ºå·²ç»ä¸‹æ‹‰äº†getScrollYï¼Œæ‰€ä»¥è¦åŽ»æŽ‰è¿™ä¹ˆå¤š return true; &#125; if (getScrollY() &lt; 0 &amp;&amp; mDeltaY &lt; 0 &amp;&amp; mHeaderView.getMeasuredHeight() - Math.abs(getScrollY()) &gt; 300 &amp;&amp; isShowHeader) &#123; invalidate(); isShowHeader = false; mScroller.forceFinished(true); int dy = mContentView.getMeasuredHeight() + getScrollY(); Log.d(TAG, "ä¸Šæ‹‰dy: " + dy); mScroller.startScroll(0, getScrollY(), 0, -getScrollY()); return true; &#125; break; case MotionEvent.ACTION_UP: if ((Math.abs(getScrollY()) &gt;= 300 &amp;&amp; !isShowHeader) || (Math.abs(getScrollY()) &lt;= mHeaderView.getMeasuredHeight() - 300 &amp;&amp; isShowHeader) || !mScroller.isFinished() || mScroller.computeScrollOffset()) &#123; return true; &#125; invalidate(); if (isShowHeader &amp;&amp; mHeaderView.getMeasuredHeight() - Math.abs(getScrollY()) &lt; 300) &#123; mScroller.startScroll(0, getScrollY(), 0, -mHeaderView.getMeasuredHeight() - getScrollY()); &#125; if (!isShowHeader &amp;&amp; Math.abs(getScrollY()) &lt; 300) &#123; mScroller.startScroll(0, getScrollY(), 0, -getScrollY()); &#125; break; &#125; return super.onTouchEvent(event); &#125; @Override public void computeScroll() &#123; if (mScroller.computeScrollOffset()) &#123; scrollTo(mScroller.getCurrX(), mScroller.getCurrY()); invalidate(); &#125; &#125;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[React Native å°è£…Android UIç»„ä»¶]]></title>
      <url>%2F2017%2F01%2F17%2FReact-Native-%E5%B0%81%E8%A3%85Android-UI%E7%BB%84%E4%BB%B6%2F</url>
      <content type="text"><![CDATA[ç§»åŠ¨APPä¸Šç”¨çš„æœ€å¤šçš„åŠŸèƒ½ä¹‹ä¸€å¯èƒ½å°±æ˜¯ä¸‹æ‹‰åˆ·æ–°äº†ï¼Œä»Šå¤©å°±ç”¨React Nativeæ¥å°è£…ä¸€ä¸ªåŸºäºŽandroid-Ultra-Pull-To-Refreshçš„ä¸‹æ‹‰åˆ·æ–°æŽ§ä»¶ã€‚ å°è£…æµç¨‹ ç»§æ‰¿SimpleViewManageræˆ–ViewGroupManageråˆ›å»ºè§†å›¾ç®¡ç†å™¨ç±»ï¼› ç»§æ‰¿ReactPackageåˆ›å»ºè‡ªå®šä¹‰ReactPackageï¼Œé‡å†™createNativeModulesã€createJSModulesã€createViewManagersè¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿”å›žç±»åž‹éƒ½æ˜¯ List ç±»åž‹ï¼Œ åœ¨createViewManagersä¸­æ·»åŠ æˆ‘ä»¬åˆ›å»ºå¥½çš„è§†å›¾ç®¡ç†å™¨ç±»åˆ°é›†åˆä¸­ï¼Œå¦å¤–ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è¿”å›žç©º List é›†åˆï¼› åœ¨Application ä¸­æ·»åŠ è‡ªå®šä¹‰çš„ ReactPackageï¼› JS å±‚å°è£…è‡ªå®šä¹‰ UI æŽ§ä»¶ã€‚ é¦–å…ˆç»§æ‰¿ViewGroupManager&lt;T&gt;åˆ›å»ºä¸€ä¸ªReactPtrAndroidManagerï¼ŒViewGroupManageræ‰€éœ€çš„æ³›åž‹ç±»åž‹æ˜¯ä¸€ä¸ª ViewGroupï¼Œåœ¨è¿™é‡Œå°±æ˜¯æˆ‘ä»¬çš„PtrClassicFrameLayoutï¼ˆæˆ‘è¿™é‡Œç›´æŽ¥ä½¿ç”¨è¿™ä¸ªåº“æä¾›çš„ç»å…¸çš„ä¸‹æ‹‰åˆ·æ–°æ ·å¼ï¼‰ï¼Œç„¶åŽé‡å†™ä»¥ä¸‹æ–¹æ³•ï¼š getNameï¼šè¿”å›žè¿™ä¸ªè§†å›¾ç®¡ç†å™¨çš„åç§°ï¼Œè¿™ä¸ªåç§°å°†è¢«ç”¨äºŽåœ¨ JavaScript ä¸­åˆ›å»º RN ç»„ä»¶æ—¶æ‰€å¼•ç”¨ã€‚ç®€å•åœ°è¯´å°±æ˜¯ JS å±‚åˆ›å»ºçš„åˆ·æ–°ç»„ä»¶å°†é€šè¿‡è¿™ä¸ªåå­—æ¥å’Œ Java å±‚èµ·åˆ°æ˜ å°„å…³ç³»ã€‚ createViewInstanceï¼šè¿”å›žä¸€ä¸ªå’Œæ³›åž‹ç±»åž‹ä¸€è‡´çš„ View å®žä¾‹ã€‚åœ¨è¿™é‡Œå°±æ˜¯è¿”å›žPtrClassicFrameLayoutç±»åž‹çš„å®žä¾‹ã€‚ getCommandsMapï¼šè¿”å›žæƒ³è¦æŽ¥æ”¶çš„æŒ‡ä»¤çš„é›†åˆã€‚ç®€å•åœ°è¯´å°±æ˜¯å¦‚æžœä½ å¸Œæœ› Java å±‚æŽ¥å—æŸä¸ªæŒ‡ä»¤ï¼Œå°±åœ¨è¿™ä¸ªæ–¹æ³•é‡Œæ·»åŠ è¿›åŽ»ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬è¿™ä¸ªä¾‹å­ï¼Œæˆ‘æƒ³åœ¨ Java å±‚å¤„ç†è‡ªåŠ¨åˆ·æ–°ã€åˆ·æ–°å®Œæˆï¼Œé‚£å°±æŠŠè‡ªåŠ¨åˆ·æ–°çš„Key,Valueå’Œåˆ·æ–°å®Œæˆçš„ Key,Valueæ·»åŠ åˆ° Map é›†åˆä¸­ã€‚ç„¶åŽåœ¨ JS å±‚å°±å¯ä»¥é€šè¿‡è°ƒç”¨UIManagerModuleç±»ä¸­çš„dispatchViewManagerCommandæ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”çš„æŒ‡ä»¤ID æ¥è°ƒç”¨ Java å±‚çš„äº‹ä»¶ã€‚åœ¨ RN ä¸­å°±æ˜¯è¿™æ ·å®žçŽ°åœ¨ JS å±‚è°ƒç”¨ Java å±‚çš„ä»£ç ã€‚ receiveCommandï¼šè¿™ä¸ªå’ŒgetCommandsMapæ˜¯å¯¹åº”çš„ï¼Œå¤„ç†æŽ¥æ”¶åˆ°å¯¹åº”æŒ‡ä»¤åŽçš„é€»è¾‘ã€‚æˆ‘ä»¬åœ¨getCommandsMapä¸­å·²ç»æ·»åŠ äº†ä¸€äº›æŒ‡ä»¤çš„é›†åˆï¼Œå¹¶ä¸”åœ¨ JS å±‚å¯ä»¥é€šè¿‡dispatchViewManagerCommandæ¥å‘é€å¯¹åº”çš„æŒ‡ä»¤ï¼Œç„¶åŽåœ¨ Java å±‚å¤„ç†ç›¸åº”çš„é€»è¾‘ï¼Œé‚£æˆ‘ä»¬æ€Žä¹ˆçŸ¥é“ JS å±‚åˆ°åº•å‘é€äº†ä»€ä¹ˆæŒ‡ä»¤ï¼Ÿå…¶å®žå°±æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ¥æŽ¥æ”¶ JS å±‚å‘å‡ºçš„æŒ‡ä»¤ã€‚ addEventEmittersï¼šé‡å†™æ­¤æ–¹æ³•ç»™ç»™å®šçš„è§†å›¾å®‰è£…è‡ªå®šä¹‰äº‹ä»¶å‘å°„å™¨ã€‚å¦‚æžœè¿™ä¸ªè§†å›¾éœ€è¦å‘å°„é™¤äº†åŸºæœ¬çš„è§¦æ‘¸äº‹ä»¶ä»¥å¤–çš„äº‹ä»¶ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªä¾‹å­ä¸­åœ¨å¼€å§‹åˆ·æ–°çš„å›žè°ƒæ–¹æ³•ä¸­å‘é€ä¸€ä¸ªè‡ªå®šä¹‰çš„äº‹ä»¶ptrRefreshç»™ JS å±‚ï¼Œ getExportedCustomDirectEventTypeConstantsï¼šè¿”å›ž ä¼ é€’ç»™JSçš„ å®šä¹‰å¯ä»¥æ”¾ç½®åœ¨åŽŸç”Ÿè§†å›¾ä¸Šçš„ ç¬¦åˆæ¡ä»¶çš„äº‹ä»¶ çš„é…ç½®æ•°æ®çš„ map é›†åˆ(å®šè¯­æ¯”è¾ƒå¤š(â•¯â€µâ–¡â€²)â•¯ï¸µâ”»â”â”»)ï¼Œ è¿™åº”è¯¥è¿”å›žéžå†’æ³¡ç›´æŽ¥è°ƒåº¦çš„äº‹ä»¶ç±»åž‹ã€‚åæ­£æˆ‘æ˜¯æ²¡çœ‹æ‡‚ã€‚ã€‚ã€‚ä»¥ä¸‹æ˜¯ä¸ªäººç†è§£ï¼Œæˆ‘ä»¬æ³¨å†Œäº†onPtrRefreshäº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶æ˜¯ç»™JS å±‚ä½¿ç”¨çš„ï¼ŒJS å±‚åœ¨onPtrRefreshä¸­æ‰§è¡Œåˆ·æ–°çš„é€»è¾‘ï¼ˆè¯·æ±‚ç½‘ç»œæ•°æ®ç­‰ï¼‰ï¼Œç„¶åŽå›žè°ƒç»™ Java å±‚ã€‚æ­£å¸¸NativeAppéœ€è¦åœ¨onRefreshBeginé‡Œæ‰§è¡Œåˆ·æ–°é€»è¾‘ï¼Œ ä½¿ç”¨ RN å°±å¯ä»¥è¿™æ ·åœ¨ JS å±‚ä¸Šæ‰§è¡Œåˆ·æ–°é€»è¾‘äº†ã€‚JS å±‚ onPtrRefresh â€“&gt; Java å±‚ ptrRefresh â€“&gt; onRefreshBeginã€‚ addViewï¼šä¸ºä»€ä¹ˆè¦é‡å†™ addView å‘¢ï¼Ÿå¦‚æžœçœ‹è¿‡PtrFrameLayoutæºç å°±çŸ¥é“ï¼Œæ˜¯åœ¨onFinishInflateä¸­ findViewByIdå¹¶åˆå§‹åŒ–contentViewå’ŒheaderViewçš„ï¼Œå¯æ˜¯ RN æ ¹æœ¬ä¸èµ°onFinishInflateæ–¹æ³•ï¼Œå› ä¸ºonFinishInflateåªæ˜¯åœ¨ä»Ž XML åŠ è½½å®Œæˆå¸ƒå±€ä¹‹åŽæ‰è°ƒç”¨ï¼ˆPS:æœ€åˆæˆ‘åœ¨createViewInstanceæ–¹æ³•ä¸­æ˜¯inflate XMLå¸ƒå±€çš„ï¼Œæ‰“Logæ˜¯èµ°onFinishInflateçš„ã€‚ã€‚ã€‚éƒ½æ˜¯æ³ªðŸ˜­ï¼‰ã€‚å¹¶ä¸”åœ¨è°ƒç”¨addViewçš„æ—¶å€™ï¼ŒPtrClassicFrameLayoutä¸­å·²ç»å­˜åœ¨headerViewäº†ï¼Œåœ¨PtrClassicFrameLayoutçš„æž„é€ æ–¹æ³•ä¸­æ·»åŠ çš„ã€‚ç„¶åŽè°ƒç”¨çˆ¶ç±»addViewçš„æ—¶å€™ï¼Œæ˜¯ä»Ž Index ä¸º0å¼€å§‹æ·»åŠ çš„ï¼Œå¾ˆæ˜¾ç„¶é€»è¾‘å°±ä¸å¯¹äº†ï¼Œæˆ‘ä»¬è¦æŠŠonFinishInflateä¸­çš„ä»£ç ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å¹¶ä¸”æŠ½å‡ºæ¥å†™æˆå…¬æœ‰æ–¹æ³•finishInflateRNï¼Œä¾›å¤–éƒ¨è°ƒç”¨ã€‚ç„¶åŽæˆ‘ä»¬é‡å†™addView æŠŠcontentView æ·»åŠ åœ¨ Index ä¸º1çš„ä½ç½®ï¼Œå¹¶ä¸”è°ƒç”¨ä¸€ä¸‹finishInflateRNå°±å¥½äº†ã€‚ æœ€åŽå°±æ˜¯æš´éœ²å±žæ€§ï¼Œè®© JS å±‚å¯ä»¥ä½¿ç”¨è¿™äº›å±žæ€§ï¼Œæ–¹æ³•ä½¿ç”¨ReactPropæ³¨è§£ï¼Œnameå°±æ˜¯ JS çš„å±žæ€§ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸€äº›é»˜è®¤å€¼ã€‚ ä»£ç ç‰‡æ®µ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105public class ReactPtrAndroidManager extends ViewGroupManager&lt;PtrClassicFrameLayout&gt; &#123; private static final int REFRESH_COMPLETE = 0; private static final int AUTO_REFRESH = 1; @Override public String getName() &#123; return "RCTPtrAndroid"; &#125; @Override protected PtrClassicFrameLayout createViewInstance(final ThemedReactContext reactContext) &#123; PtrClassicFrameLayout layout = new PtrClassicFrameLayout(reactContext); layout.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); return layout; &#125; @ReactProp(name = "resistance", defaultFloat = 1.7f) public void setResistance(PtrClassicFrameLayout ptr, float resistance) &#123; ptr.setResistance(resistance); &#125; @ReactProp(name = "durationToCloseHeader", defaultInt = 200) public void setDurationToCloseHeader(PtrClassicFrameLayout ptr, int duration) &#123; ptr.setDurationToCloseHeader(duration); &#125; @ReactProp(name = "durationToClose", defaultInt = 300) public void setDurationToClose(PtrClassicFrameLayout ptr, int duration) &#123; ptr.setDurationToClose(duration); &#125; @ReactProp(name = "ratioOfHeaderHeightToRefresh", defaultFloat = 1.2f) public void setRatioOfHeaderHeightToRefresh(PtrClassicFrameLayout ptr, float ratio) &#123; ptr.setRatioOfHeaderHeightToRefresh(ratio); &#125; @ReactProp(name = "pullToRefresh", defaultBoolean = false) public void setPullToRefresh(PtrClassicFrameLayout ptr, boolean pullToRefresh) &#123; ptr.setPullToRefresh(pullToRefresh); &#125; @ReactProp(name = "keepHeaderWhenRefresh", defaultBoolean = false) public void setKeepHeaderWhenRefresh(PtrClassicFrameLayout ptr, boolean keep) &#123; ptr.setKeepHeaderWhenRefresh(keep); &#125; @ReactProp(name = "pinContent", defaultBoolean = false) public void setPinContent(PtrClassicFrameLayout ptr, boolean pinContent) &#123; ptr.setPinContent(pinContent); &#125; @Nullable @Override public Map&lt;String, Integer&gt; getCommandsMap() &#123; return MapBuilder.of("autoRefresh", AUTO_REFRESH, "refreshComplete", REFRESH_COMPLETE); &#125; @Override public void receiveCommand(PtrClassicFrameLayout root, int commandId, @Nullable ReadableArray args) &#123; switch (commandId) &#123; case AUTO_REFRESH: root.autoRefresh(); break; case REFRESH_COMPLETE: root.refreshComplete(); break; default: break; &#125; &#125; @Override protected void addEventEmitters(final ThemedReactContext reactContext, final PtrClassicFrameLayout view) &#123; view.setLastUpdateTimeRelateObject(this); view.setPtrHandler(new PtrDefaultHandler() &#123; @Override public boolean checkCanDoRefresh(PtrFrameLayout frame, View content, View header) &#123; return checkContentCanBePulledDown(frame, content, header); &#125; @Override public void onRefreshBegin(PtrFrameLayout frame) &#123; reactContext .getNativeModule(UIManagerModule.class) .getEventDispatcher() .dispatchEvent(new PtrEvent(view.getId())); &#125; &#125;); &#125; @Nullable @Override public Map&lt;String, Object&gt; getExportedCustomDirectEventTypeConstants() &#123; return MapBuilder.&lt;String, Object&gt;of( "ptrRefresh", MapBuilder.of("registrationName", "onRefresh")); &#125; @Override public void addView(PtrClassicFrameLayout parent, View child, int index) &#123; super.addView(parent, child, 1); parent.finishInflateRN(); &#125;&#125; 12345678910111213141516public class PtrEvent extends Event&lt;PtrEvent&gt; &#123; public PtrEvent(int viewTag) &#123; super(viewTag); &#125; @Override public String getEventName() &#123; return "ptrRefresh"; &#125; @Override public void dispatch(RCTEventEmitter rctEventEmitter) &#123; rctEventEmitter.receiveEvent(getViewTag(), getEventName(), null); &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667import React, &#123; Component, PropTypes,&#125; from 'react';import &#123; requireNativeComponent, View,&#125; from 'react-native';const UIManager = require('UIManager');const ReactNative = require('ReactNative');const REF_PTR = "ptr_ref";export default class PtrComponent extends Component &#123; constructor(props) &#123; super(props); this._onRefresh = this._onRefresh.bind(this); &#125; _onRefresh() &#123; if (!this.props.handleRefresh) &#123; return; &#125; this.props.handleRefresh(); &#125;; refreshComplete() &#123; UIManager.dispatchViewManagerCommand( ReactNative.findNodeHandle(this.refs[REF_PTR]), 0, null ); &#125; autoRefresh() &#123; let self = this; UIManager.dispatchViewManagerCommand( ReactNative.findNodeHandle(self.refs[REF_PTR]), 1, null ); &#125; render() &#123; // onRefresh äº‹ä»¶å¯¹åº”åŽŸç”Ÿçš„ptrRefreshäº‹ä»¶ return ( &lt;RCTPtrAndroid ref=&#123;REF_PTR&#125; &#123;...this.props&#125; onRefresh=&#123;() =&gt; this._onRefresh()&#125;/&gt; ); &#125;&#125;PtrComponent.name = "RCTPtrAndroid"; //ä¾¿äºŽè°ƒè¯•æ—¶æ˜¾ç¤º(å¯ä»¥è®¾ç½®ä¸ºä»»æ„å­—ç¬¦ä¸²)PtrComponent.propTypes = &#123; handleRefresh: PropTypes.func, resistance: PropTypes.number, durationToCloseHeader: PropTypes.number, durationToClose: PropTypes.number, ratioOfHeaderHeightToRefresh: PropTypes.number, pullToRefresh: PropTypes.bool, keepHeaderWhenRefresh: PropTypes.bool, pinContent: PropTypes.bool, ...View.propTypes,&#125;;const RCTPtrAndroid = requireNativeComponent('RCTPtrAndroid', PtrComponent, &#123;nativeOnly: &#123;onRefresh: true&#125;&#125;); ç„¶åŽæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨PtrComponentäº†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253import React, &#123; Component, PropTypes,&#125; from 'react';import &#123; Text, View, ToastAndroid, ScrollView,&#125; from 'react-native';import PtrFrame from './component/PtrComponent';export default class Search extends Component &#123; static propTypes = &#123; navigator: PropTypes.object, &#125;; render() &#123; return ( &lt;PtrFrame ref='ptr' handleRefresh=&#123;() =&gt; this._getData()&#125; durationToCloseHeader=&#123;300&#125; durationToClose=&#123;200&#125; resistance=&#123;2&#125; pinContent=&#123;false&#125; ratioOfHeaderHeightToRefresh=&#123;1.2&#125; pullToRefresh=&#123;false&#125; keepHeaderWhenRefresh=&#123;true&#125; style=&#123;&#123;flex: 1&#125;&#125;&gt; &lt;ScrollView style=&#123;&#123;flex: 1, flexDirection: 'column'&#125;&#125;&gt; &lt;View style=&#123;&#123;backgroundColor: '#FFAA55', height: 200&#125;&#125;/&gt; &lt;View style=&#123;&#123;backgroundColor: '#FFAAAA', height: 200&#125;&#125;/&gt; &lt;View style=&#123;&#123;backgroundColor: '#FFAAFF', height: 200&#125;&#125;/&gt; &lt;View style=&#123;&#123;backgroundColor: '#00AAAA', height: 200&#125;&#125;/&gt; &lt;View style=&#123;&#123;backgroundColor: '#00AA99', height: 200&#125;&#125;/&gt; &lt;View style=&#123;&#123;backgroundColor: '#FF99AA', height: 200&#125;&#125;/&gt; &lt;/ScrollView&gt; &lt;/PtrFrame&gt; ); &#125;; _getData() &#123; ToastAndroid.show("refreshing", ToastAndroid.SHORT); this.timer = setTimeout(() =&gt; &#123; this.refs.ptr.refreshComplete(); &#125;, 2500); &#125;; componentWillUnmount() &#123; this.timer &amp;&amp; clearTimeout(this.timer); &#125;&#125; æ•ˆæžœå›¾ é¡¹ç›®åœ°å€https://github.com/panda912/RNAndroidPullToRefresh]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Android L ä½¿ç”¨ ViewOutlineProvider è£å‰ª View]]></title>
      <url>%2F2017%2F01%2F12%2FAndroid-L-%E4%BD%BF%E7%94%A8-ViewOutlineProvider-%E8%A3%81%E5%89%AA-View%2F</url>
      <content type="text"><![CDATA[Android 5.0çš„ View ç±»ä¸­æ–°å¢žäº† setOutlineProvider(ViewOutlineProvider provider) æ–¹æ³•ï¼Œæ³¨é‡Šå¦‚ä¸‹ï¼š Sets the {@link ViewOutlineProvider} of the view, which generates the Outline that defines the shape of the shadow it casts, and enables outline clipping. The default ViewOutlineProvider, {@link ViewOutlineProvider#BACKGROUND}, queries the Outline from the Viewâ€™s background drawable, via {@link Drawable#getOutline(Outline)}. Changing the outline provider with this method allows this behavior to be overridden. If the ViewOutlineProvider is null, if querying it for an outline returns false, or if the produced Outline is {@link Outline#isEmpty()}, shadows will not be cast. Only outlines that return true from {@link Outline#canClip()} may be used for clipping. @see #setClipToOutline(boolean) @see #getClipToOutline() @see #getOutlineProvider() é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æŠŠ View è£å‰ªæˆä¸€äº›ç‰¹å®š(åœ†å½¢ã€çŸ©å½¢ã€åœ†è§’çŸ©å½¢)çš„å½¢çŠ¶ï¼š 1234567view.setOutlineProvider(new ViewOutlineProvider() &#123; @Override public void getOutline(View view, Outline outline) &#123; outline.setRoundRect(0, 0, view.getWidth(), view.getHeight(), 30); &#125;&#125;);view.setClipToOutline(true); ä¹Ÿå¯ä»¥ç”¨æ¥è®¾ç½®æŠ•å½±ï¼Œä½†æ˜¯æŠ•å½±çš„å½¢çŠ¶åªèƒ½æ˜¯å‡¸å¤šè¾¹å½¢ï¼Œä¸ºä»€ä¹ˆï¼Ÿçœ‹æºç ï¼š 123456789101112131415161718/** * Sets the Constructs an Outline from a * &#123;@link android.graphics.Path#isConvex() convex path&#125;. */public void setConvexPath(@NonNull Path convexPath) &#123; if (convexPath.isEmpty()) &#123; setEmpty(); return; &#125; //å¦‚æžœä¸æ˜¯å‡¸å¤šè¾¹å½¢ï¼Œä¼šæŠ›å¼‚å¸¸ if (!convexPath.isConvex()) &#123; throw new IllegalArgumentException("path must be convex"); &#125; mMode = MODE_CONVEX_PATH; mPath.set(convexPath); mRect.setEmpty(); mRadius = RADIUS_UNDEFINED;&#125; 123456789101112131415view.setElevation(5);view.setOutlineProvider(new ViewOutlineProvider() &#123; @Override public void getOutline(View view, Outline outline) &#123; //ä½ å¯ä»¥ç”¨ Path æŒ‡å®šä»»ä½•çš„å½¢çŠ¶ï¼Œå‰ææ˜¯å‡¸å¤šè¾¹å½¢ //è¿™é‡Œè®¾ç½®æŠ•å½±çš„ä½ç½®ä»Žå³ä¸‹è§’å¼€å§‹ï¼ŒæŠ•å½±å½¢çŠ¶æ˜¯çŸ©å½¢ Path path = new Path(); path.moveTo(view.getWidth(), view.getHeight()); path.lineTo(view.getWidth(), view.getHeight() * 2); path.lineTo(view.getWidth() * 2, view.getHeight() * 2); path.lineTo(view.getWidth() * 2, view.getHeight()); path.close(); outline.setConvexPath(path); &#125;&#125;);]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨å±žæ€§åŠ¨ç”»å®žçŽ°è¿›åº¦æ¡æ•ˆæžœ]]></title>
      <url>%2F2016%2F12%2F30%2F%E4%BD%BF%E7%94%A8%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0%E8%BF%9B%E5%BA%A6%E6%9D%A1%E6%95%88%E6%9E%9C%2F</url>
      <content type="text"><![CDATA[å‚è€ƒé“¾æŽ¥ï¼šhttp://blog.csdn.net/AndroidMsky/article/details/50239447 æœ€è¿‘é¡¹ç›®ä¸­è¦åšä¸€ä¸ªæ˜¾ç¤ºè¿›åº¦çš„æ•ˆæžœï¼Œè®¾è®¡ç»™äº†æˆ‘ä»¬æ¯ä¸ªé˜¶æ®µçš„åˆ‡å›¾ï¼Œåªè¦æ ¹æ®æ•°æ®æ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡å°±å¯ä»¥äº†ï¼ŒåŽæ¥ç©ºé—²çš„æ—¶å€™å°±æƒ³ç€æŠŠå®ƒåšæˆåŠ¨æ€çš„æ•ˆæžœï¼Œä»¥å‰æ— æ„é—´çœ‹åˆ°ä¸Šé¢çš„æ–‡ç« ï¼Œæ­£å¥½åœ¨è¿™é‡Œç”¨åˆ°ï¼Œå®žçŽ°æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œå°±ä¸‰å±‚Viewï¼Œæœ€åº•å±‚æ˜¯ç»¿è‰²çš„Viewï¼Œä¸­é—´ä¸€å±‚æ˜¯ç°è‰²çš„Viewï¼Œæœ€ä¸Šå±‚å°±æ˜¯ä¸€ä¸ªç©ºå¿ƒçš„ImageViewï¼Œä½¿ç”¨å±žæ€§åŠ¨ç”»æŽ§åˆ¶ä¸­é—´ç°è‰²çš„Viewå‘å³å¹³ç§»ï¼Œæœ€åº•å±‚ç»¿è‰²å°±ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œä»Žè€Œå®žçŽ°åŠ¨æ€è¿›åº¦æ¡çš„æ•ˆæžœã€‚è‡³äºŽåº•éƒ¨çš„æ–‡å­—ï¼Œå°±æ˜¯ LinearLayout å››ç­‰åˆ†ï¼Œåœ¨addUpdateListenerä¸­èŽ·å–åŠ¨ç”»å½“å‰çš„valueï¼ŒåŠ¨æ€è®¾ç½®æ–‡å­—çš„é¢œè‰²ã€‚ ä»£ç ç‰‡æ®µï¼š12345678910111213141516171819202122// mProgressMaskView ä¸­é—´ç°è‰²é®ç½©å±‚View// mProgressDrawableWidth è¿›åº¦æ¡çš„å®½åº¦// state æœåŠ¡å™¨è¿”å›žçš„å­—æ®µ 1ã€2ã€3ã€4ï¼Œå¯¹åº”æ¯ä¸€ä¸ªé˜¶æ®µfinal int state = StringConversionUtil.parseInt(obj.ob_state, 1);if (mProgressAnimator == null) &#123; mProgressAnimator = ObjectAnimator.ofFloat(mProgressMaskView, "translationX", 0, mProgressDrawableWidth * state / 4); mProgressAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animation) &#123; float value = (float) animation.getAnimatedValue(); int index = (int) (value / (mProgressDrawableWidth / 4)); //è®¾ç½®åº•éƒ¨æ–‡å­—çš„é¢œè‰² ((TextView) mProgressInfoLL.getChildAt(Math.min(index, state - 1))).setTextColor(getResources().getColor(R.color.toolbar_green)); &#125; &#125;); mProgressAnimator.setDuration(1000);&#125; else &#123; mProgressAnimator.setFloatValues(0, mProgressDrawableWidth * state / 4);&#125;if (!mProgressAnimator.isRunning()) &#123; mProgressAnimator.start();&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Android Drawable ä¹‹ LevelListDrawable]]></title>
      <url>%2F2016%2F12%2F23%2FAndroid-Drawable-%E4%B9%8B-LevelListDrawable%2F</url>
      <content type="text"><![CDATA[æœ¬æ–‡æ¼”ç¤ºä½¿ç”¨LevelListDrawableç»“åˆandroid-Ultra-Pull-To-Refreshå®žçŽ°åŒç¨‹æ—…æ¸¸App çš„é¦–é¡µä¸‹æ‹‰åˆ·æ–°æ•ˆæžœï¼ŒDemoä½¿ç”¨åˆ°çš„å›¾ç‰‡èµ„æºæ˜¯è§£åŽ‹ç¼©åŒç¨‹App å–åˆ°çš„ã€‚ æ•ˆæžœåˆ†æžï¼šä»”ç»†è§‚å¯Ÿè¿™ä¸ªä¸‹æ‹‰æ•ˆæžœä¸éš¾å‘çŽ°ï¼Œä¸‹æ‹‰çš„æ—¶å€™å…¶å®žå°±æ˜¯æ ¹æ®ä¸‹æ‹‰çš„è·ç¦»æ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡ï¼Œåˆ·æ–°çš„æ—¶å€™å°±æ˜¯æ˜¾ç¤ºä¸€ä¸ªloading åŠ¨ç”»ã€‚ ä»£ç ç›®å½•ï¼š ä»£ç ç‰‡æ®µï¼štc_pull.xml123456789101112131415161718192021222324252627&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;level-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="true"&gt; &lt;item android:drawable="@drawable/loading_home_1" android:maxLevel="0" /&gt; &lt;item android:drawable="@drawable/loading_home_2" android:maxLevel="1" /&gt; &lt;item android:drawable="@drawable/loading_home_3" android:maxLevel="2" /&gt; &lt;item android:drawable="@drawable/loading_home_4" android:maxLevel="3" /&gt; &lt;item android:drawable="@drawable/loading_home_5" android:maxLevel="4" /&gt; &lt;item android:drawable="@drawable/loading_home_6" android:maxLevel="5" /&gt; &lt;item android:drawable="@drawable/loading_home_7" android:maxLevel="6" /&gt; &lt;item android:drawable="@drawable/loading_home_8" android:maxLevel="7" /&gt; &lt;item android:drawable="@drawable/loading_home_9" android:maxLevel="8" /&gt; &lt;item android:drawable="@drawable/loading_home_10" android:maxLevel="9" /&gt; &lt;item android:drawable="@drawable/loading_home_11" android:maxLevel="10" /&gt; &lt;item android:drawable="@drawable/loading_home_12" android:maxLevel="11" /&gt; &lt;item android:drawable="@drawable/loading_home_13" android:maxLevel="12" /&gt; &lt;item android:drawable="@drawable/loading_home_14" android:maxLevel="13" /&gt; &lt;item android:drawable="@drawable/loading_home_15" android:maxLevel="14" /&gt; &lt;item android:drawable="@drawable/loading_home_16" android:maxLevel="15" /&gt; &lt;item android:drawable="@drawable/loading_home_17" android:maxLevel="16" /&gt; &lt;item android:drawable="@drawable/loading_home_18" android:maxLevel="17" /&gt; &lt;item android:drawable="@drawable/loading_home_19" android:maxLevel="18" /&gt; &lt;item android:drawable="@drawable/loading_home_20" android:maxLevel="19" /&gt; &lt;item android:drawable="@drawable/loading_home_21" android:maxLevel="20" /&gt; &lt;item android:drawable="@drawable/loading_home_22" android:maxLevel="21" /&gt; &lt;item android:drawable="@drawable/loading_home_23" android:maxLevel="22" /&gt;&lt;/level-list&gt; tc_loading.xml12345678910111213141516171819202122&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false"&gt; &lt;item android:drawable="@drawable/loop_home_01" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_01" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_02" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_03" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_04" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_05" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_06" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_07" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_08" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_09" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_10" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_11" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_12" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_13" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_14" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_15" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_16" android:duration="70" /&gt; &lt;item android:drawable="@drawable/loop_home_17" android:duration="70" /&gt;&lt;/animation-list&gt; TCPtrHeader.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public class TCPtrHeader extends FrameLayout implements PtrUIHandler &#123; public static final String TAG = TCPtrHeader.class.getSimpleName(); private ImageView mPullIV; public TCPtrHeader(Context context) &#123; this(context, null); &#125; public TCPtrHeader(Context context, AttributeSet attrs) &#123; this(context, attrs, 0); &#125; public TCPtrHeader(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); init(); &#125; private void init() &#123; mPullIV = new ImageView(getContext()); mPullIV.setPadding(0, 30, 0, 0); mPullIV.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); mPullIV.setImageResource(R.drawable.tc_pull); mPullIV.setScaleType(ImageView.ScaleType.FIT_CENTER); addView(mPullIV); &#125; @Override public void onUIReset(PtrFrameLayout frame) &#123; &#125; @Override public void onUIRefreshPrepare(PtrFrameLayout frame) &#123; &#125; @Override public void onUIRefreshBegin(PtrFrameLayout frame) &#123; mPullIV.setImageResource(R.drawable.tc_loading); AnimationDrawable drawable = (AnimationDrawable) mPullIV.getDrawable(); drawable.start(); &#125; @Override public void onUIRefreshComplete(PtrFrameLayout frame) &#123; mPullIV.setImageResource(R.drawable.tc_pull); &#125; @Override public void onUIPositionChange(PtrFrameLayout frame, boolean isUnderTouch, byte status, PtrIndicator ptrIndicator) &#123; final int offsetToRefresh = frame.getOffsetToRefresh(); final int currentPos = ptrIndicator.getCurrentPosY(); final int imgLevel = currentPos / (offsetToRefresh / 23); mPullIV.setImageLevel(Math.min(imgLevel, 22)); &#125;&#125; æ€»ç»“ï¼šæœ¬æ–‡ä¸»è¦æ˜¯ä»‹ç»LevelListDrawableçš„åŸºæœ¬ç”¨æ³•ï¼Œè¯´å®žè¯æˆ‘ä¹‹å‰æ˜¯ä¸çŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿çš„ï¼Œå…¶å®ž Android ç»™æˆ‘ä»¬æä¾›äº†è®¸å¤šAPIï¼Œæˆ‘ä»¬è¦å–„äºŽåˆ©ç”¨ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[TabLayout æ˜¾ç¤ºæ›´å¤š æ‹–æ‹½æŽ’åº]]></title>
      <url>%2F2016%2F10%2F28%2FTabLayout-%E6%98%BE%E7%A4%BA%E6%9B%B4%E5%A4%9A-%E6%8B%96%E6%8B%BD%E6%8E%92%E5%BA%8F%2F</url>
      <content type="text"><![CDATA[#å®žçŽ°æ€è·¯ç‚¹å‡»â€æ›´å¤šâ€æ˜¾ç¤ºåŒ…å«RecyclerViewçš„PopupWindowï¼Œåªè¦è®©RecyclerViewé€‰ä¸­itemçš„positionå’ŒViewPagerçš„currentItemå¯¹åº”å°±å¥½äº†ï¼›å½“RecyclerViewæ‹–æ‹½æŽ’åºä¹‹åŽåªè¦æŽ§åˆ¶å¥½å½“å‰é€‰ä¸­çš„itemçš„positionçš„é€»è¾‘å°±å¥½äº†ã€‚ ä¸ç®¡æ€Žä¹ˆæ‹–æ‹½æŽ’åºï¼Œåªè¦å½“å‰é€‰ä¸­çš„itemçš„positionæ²¡æœ‰å˜ï¼Œåˆ™æŽ’åºä¹‹åŽé€‰ä¸­çš„positionè¿˜æ˜¯åŽŸpositionï¼›å¦‚æžœæŽ’åºä¹‹åŽå½“å‰é€‰ä¸­çš„itemçš„positionå‘ç”Ÿå˜åŒ–ï¼Œåˆ™æ ¹æ®å…·ä½“æƒ…å†µ+1æˆ–-1ï¼›å¦‚æžœå½“å‰æ‹–æ‹½çš„æ˜¯é€‰ä¸­çš„itemï¼Œåˆ™æ‹–æ‹½æŽ’åºä¹‹åŽå½“å‰é€‰ä¸­itemçš„positionå°±æ˜¯æ‹–æ‹½ä¹‹åŽçš„positionã€‚ å½“Viewpageråˆ‡æ¢çš„æ—¶å€™ï¼Œç›¸åº”æ”¹å˜ RecyclerViewé€‚é…å™¨ä¸­è®°å½•çš„å½“å‰é€‰ä¸­çš„itemçš„å€¼mCurrentItemï¼Œå¹¶æ›´æ–°é€‚é…å™¨ã€‚ 12345@Overridepublic void onPageSelected(int position) &#123; mRVAdapter.setCurrentItem(position); mRVAdapter.notifyDataSetChanged();&#125; ç»§æ‰¿ItemTouchHelper.Callbacké‡å†™å…¶æ–¹æ³•ï¼Œå¤„ç†æ‹–æ‹½çš„æ•ˆæžœï¼Œå¹¶è®©é€‚é…å™¨å®žçŽ°OnItemMoveCallbackæŽ¥å£ï¼ŒæŠŠæ‹–æ‹½çš„ç›¸å…³é€»è¾‘æ”¾åˆ°é€‚é…å™¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public class TabItemTouchCallback extends ItemTouchHelper.Callback &#123; @Override public int getMovementFlags(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) &#123; if (recyclerView.getLayoutManager() instanceof GridLayoutManager) &#123; final int dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN | ItemTouchHelper.LEFT | ItemTouchHelper.RIGHT; final int swipeFlags = 0; return makeMovementFlags(dragFlags, swipeFlags); &#125; else if (recyclerView.getLayoutManager() instanceof LinearLayoutManager) &#123; final int dragFlags = ItemTouchHelper.UP | ItemTouchHelper.DOWN; final int swipeFlags = 0; return makeMovementFlags(dragFlags, swipeFlags); &#125; else &#123; return 0; &#125; &#125; @Override public boolean onMove(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, RecyclerView.ViewHolder target) &#123; int fromPosition = viewHolder.getAdapterPosition(); int toPosition = target.getAdapterPosition(); if (mOnItemMoveCallback != null) &#123; mOnItemMoveCallback.onMove(fromPosition, toPosition); &#125; return true; &#125; @Override public void onSwiped(RecyclerView.ViewHolder viewHolder, int direction) &#123; if (mOnItemMoveCallback != null) &#123; mOnItemMoveCallback.onSwiped(viewHolder.getAdapterPosition()); &#125; &#125; @Override public void onChildDraw(Canvas c, RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder, float dX, float dY, int actionState, boolean isCurrentlyActive) &#123; if (actionState == ItemTouchHelper.ACTION_STATE_SWIPE) &#123; viewHolder.itemView.setTranslationX(dX); &#125; else &#123; super.onChildDraw(c, recyclerView, viewHolder, dX, dY, actionState, isCurrentlyActive); &#125; &#125; @Override public void onSelectedChanged(RecyclerView.ViewHolder viewHolder, int actionState) &#123; super.onSelectedChanged(viewHolder, actionState); &#125; @Override public void clearView(RecyclerView recyclerView, RecyclerView.ViewHolder viewHolder) &#123; super.clearView(recyclerView, viewHolder); mOnItemMoveCallback.onFinished(); &#125; private OnItemMoveCallback mOnItemMoveCallback; public void setOnItemMoveCallback(OnItemMoveCallback callback) &#123; mOnItemMoveCallback = callback; &#125; public interface OnItemMoveCallback &#123; void onMove(int fromPosition, int toPosition); void onSwiped(int position); void onFinished(); &#125;&#125; é‡ç‚¹çœ‹onMoveæ–¹æ³•ï¼š 12345public abstract int getMovementFlags(RecyclerView recyclerView, ViewHolder viewHolder);public abstract boolean onMove(RecyclerView recyclerView, ViewHolder viewHolder, ViewHolder target);public abstract void onSwiped(ViewHolder viewHolder, int direction);public void onSelectedChanged(ViewHolder viewHolder, int actionState) &#123;&#125;public void clearView(RecyclerView recyclerView, ViewHolder viewHolder) &#123;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è‡ªå®šä¹‰æ ‡ç­¾é€‰æ‹©å™¨æŽ§ä»¶]]></title>
      <url>%2F2016%2F10%2F27%2F%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE%E9%80%89%E6%8B%A9%E5%99%A8%E6%8E%A7%E4%BB%B6%2F</url>
      <content type="text"></content>
    </entry>

    
    <entry>
      <title><![CDATA[shapeä¸­è®¾ç½®paddingæ— æ•ˆè§£å†³æ–¹æ¡ˆ]]></title>
      <url>%2F2016%2F10%2F20%2Fshape%E4%B8%AD%E8%AE%BE%E7%BD%AEpadding%E6%97%A0%E6%95%88%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
      <content type="text"><![CDATA[æœ€è¿‘åœ¨å†™å¸ƒå±€çš„æ—¶å€™ï¼Œç»™LinearLayoutæ·»åŠ åˆ†å‰²çº¿ï¼Œå¹¶ä¸”æƒ³è®©åˆ†å‰²çº¿æœ‰ä¸Šä¸‹è¾¹è·ï¼ŒäºŽæ˜¯å°±è‡ªå®šä¹‰ä¸€ä¸ªshapeï¼š 12345678&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle"&gt; &lt;size android:height="@dimen/line_height" /&gt; &lt;solid android:color="@color/main_line" /&gt; &lt;padding android:bottom="10dp" android:top="10dp" /&gt;&lt;/shape&gt; å¯æ˜¯äº‹ä¸Žæ„¿è¿ï¼Œå®žé™…æ•ˆæžœå¹¶æ²¡æœ‰ä¸Šä¸‹è¾¹è·ã€‚ è§£å†³æ–¹æ³•ï¼š æŠŠshapeæ”¾åœ¨layer-listçš„itemä¸­ï¼Œç›´æŽ¥åœ¨itemçš„èŠ‚ç‚¹ä¸‹è®¾ç½®topå’Œbottomï¼š 12345678910&lt;layer-list xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:bottom="10dp" android:top="10dp"&gt; &lt;shape android:shape="rectangle"&gt; &lt;size android:height="@dimen/line_height" /&gt; &lt;solid android:color="@color/main_line" /&gt; &lt;/shape&gt; &lt;/item&gt;&lt;/layer-list&gt;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[SurfaceViewåŸºæœ¬ç”¨æ³•]]></title>
      <url>%2F2016%2F10%2F18%2FSurfaceView%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%2F</url>
      <content type="text"><![CDATA[SurfaceViewä¸€åŠå¤šç”¨äºŽæ¸¸æˆå¼€å‘ï¼Œæˆ–è€…ç±»ä¼¼å¤§è½¬ç›˜ï¼Œæ—¶é’ŸæŽ§ä»¶ç­‰åŠ¨æ€å®žæ—¶æ›´æ–°çš„Viewï¼Œå› ä¸ºå®ƒè¦æ±‚åœ¨å­çº¿ç¨‹ä¸­ç»˜åˆ¶ï¼Œè€Œä¸ä¼šé˜»å¡žä¸»çº¿ç¨‹ã€‚ è‡ªå®šä¹‰Viewç»§æ‰¿SurfaceViewå¹¶ä¸”å®žçŽ°SurfaceHolder.CallbackæŽ¥å£ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * A client may implement this interface to receive information about * changes to the surface. When used with a &#123;@link SurfaceView&#125;, the * Surface being held is only available between calls to * &#123;@link #surfaceCreated(SurfaceHolder)&#125; and * &#123;@link #surfaceDestroyed(SurfaceHolder)&#125;. The Callback is set with * &#123;@link SurfaceHolder#addCallback SurfaceHolder.addCallback&#125; method. */public interface Callback &#123; /** * This is called immediately after the surface is first created. * Implementations of this should start up whatever rendering code * they desire. Note that only one thread can ever draw into * a &#123;@link Surface&#125;, so you should not draw into the Surface here * if your normal rendering will be in another thread. * * @param holder The SurfaceHolder whose surface is being created. */ public void surfaceCreated(SurfaceHolder holder); /** * This is called immediately after any structural changes (format or * size) have been made to the surface. You should at this point update * the imagery in the surface. This method is always called at least * once, after &#123;@link #surfaceCreated&#125;. * * @param holder The SurfaceHolder whose surface has changed. * @param format The new PixelFormat of the surface. * @param width The new width of the surface. * @param height The new height of the surface. */ public void surfaceChanged(SurfaceHolder holder, int format, int width, int height); /** * This is called immediately before a surface is being destroyed. After * returning from this call, you should no longer try to access this * surface. If you have a rendering thread that directly accesses * the surface, you must ensure that thread is no longer touching the * Surface before returning from this function. * * @param holder The SurfaceHolder whose surface is being destroyed. */ public void surfaceDestroyed(SurfaceHolder holder);&#125; surfaceCreatedåœ¨surfaceç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ—¶å€™ä¼šè°ƒç”¨ï¼Œä¸€èˆ¬åœ¨è¯¥æ–¹æ³•ä¸­åˆ›å»ºå¹¶å¯åŠ¨ç»˜åˆ¶çº¿ç¨‹ï¼› surfaceChangedåœ¨surfaceå‘ç”Ÿå˜åŒ–æ—¶ä¼šè°ƒç”¨ï¼› surfaceDestroyedåœ¨surfaceè¢«é”€æ¯çš„æ—¶å€™è°ƒç”¨ï¼Œä¸€èˆ¬åœ¨è¿™é‡Œåœæ­¢ç»˜åˆ¶çº¿ç¨‹ã€‚ å®ƒä¼šåœ¨surfaceè¢«é”€æ¯ä¹‹å‰ç«‹å³è°ƒç”¨ï¼Œå½“è¢«è°ƒç”¨ä¹‹åŽï¼Œå°±ä¸ä¸åº”è¯¥å†è¯•å›¾è®¿é—®surfaceã€‚å¦‚æžœä½ æœ‰ä¸€ä¸ªæ¸²æŸ“çº¿ç¨‹ç›´æŽ¥è®¿é—®surfaceï¼Œä½ åº”è¯¥ç¡®ä¿è¿™ä¸ªçº¿ç¨‹åœ¨è¯¥æ–¹æ³•è°ƒç”¨ä¹‹å‰ä¸å†æœ‰å…³è”ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡SurfaceViewä¸­getHolder()æ¥èŽ·å–SurfaceHolderï¼Œå†é€šè¿‡SurfaceHolderçš„lockCanvas()æ¥èŽ·å–Canvasï¼Œ 1public Canvas lockCanvas(Rect dirty); è„çŸ©å½¢ï¼Œåªåˆ·æ–°è¯¥åŒºåŸŸï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œæ³¨æ„åŒç¼“å†²çš„é—®é¢˜ã€‚ èŽ·å–å®Œç”»å¸ƒå°±å¯ä»¥åšç»˜åˆ¶çš„äº‹æƒ…äº†ï¼Œç»˜åˆ¶å®Œæˆä¹‹åŽè°ƒç”¨è¦SurfaceHolderçš„unlockCanvasAndPost(Canvas canvas)æäº¤ç”»å¸ƒã€‚ æ—¶é’ŸDemoï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226public class Clock extends SurfaceView implements SurfaceHolder.Callback &#123; private final Object lock = new Object(); private SurfaceHolder mSurfaceHolder; private DrawThread mDrawThread; /** * é¢æ¿ */ private Paint mPanelPaint; /** * åˆ»åº¦ */ private Paint mScalePaint; /** * æ•°å­— */ private Paint mTextPaint; /** * æ—¶é’ˆ */ private Paint mHourPaint; /** * åˆ†é’ˆ */ private Paint mMinutePaint; /** * ç§’é’ˆ */ private Paint mSecondPaint; private int mRadius; public Clock(Context context) &#123; this(context, null); &#125; public Clock(Context context, AttributeSet attrs) &#123; this(context, attrs, 0); &#125; public Clock(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); mSurfaceHolder = this.getHolder(); mSurfaceHolder.addCallback(this); //é¢æ¿ mPanelPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mPanelPaint.setColor(Color.RED); //åˆ»åº¦ mScalePaint = new Paint(Paint.ANTI_ALIAS_FLAG); mScalePaint.setColor(Color.argb(130, 255, 255, 255)); mTextPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mTextPaint.setColor(Color.WHITE); mTextPaint.setTextSize(40); mTextPaint.setTextAlign(Paint.Align.CENTER); //æ—¶é’ˆ mHourPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mHourPaint.setColor(Color.WHITE); //åˆ†é’ˆ mMinutePaint = new Paint(Paint.ANTI_ALIAS_FLAG); mMinutePaint.setColor(Color.argb(200, 255, 255, 255)); //ç§’é’ˆ mSecondPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mSecondPaint.setStrokeWidth(2); mSecondPaint.setColor(Color.GRAY); setFocusable(false); setFocusableInTouchMode(false); &#125; @Override public void surfaceCreated(SurfaceHolder holder) &#123; mDrawThread = new DrawThread(); mDrawThread.setRun(true); mDrawThread.start(); &#125; @Override public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) &#123; &#125; @Override public void surfaceDestroyed(SurfaceHolder holder) &#123; mDrawThread.setRun(false); &#125; @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; super.onMeasure(widthMeasureSpec, heightMeasureSpec); mRadius = Math.min(getMeasuredWidth(), getMeasuredHeight()) / 2; &#125; private class DrawThread extends Thread &#123; private static final float RATIO = 6 / 7f; private boolean isRun; @Override public void run() &#123; while (isRun) &#123; synchronized (lock) &#123; Canvas canvas = mSurfaceHolder.lockCanvas(); if (canvas != null) &#123; long start = System.currentTimeMillis(); doDraw(canvas); mSurfaceHolder.unlockCanvasAndPost(canvas); long end = System.currentTimeMillis(); long duration = end - start; if (duration &lt; 1000) &#123; try &#123; Thread.sleep(1000 - duration); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; &#125; &#125; /** * ç”»é¢æ¿ * * @param canvas */ private void doDraw(final Canvas canvas) &#123; //æ¸…å± canvas.drawColor(Color.RED); //é¢æ¿ canvas.drawCircle(mRadius, mRadius, mRadius, mPanelPaint); //åˆ»åº¦ for (int i = 1, scaleSize = 12 * 5 * 5; i &lt;= scaleSize; i++) &#123; canvas.rotate(1.2f, mRadius, mRadius); if (i % 25 == 0) &#123; mScalePaint.setStrokeWidth(4); mScalePaint.setColor(Color.argb(150, 255, 255, 255)); canvas.drawLine(mRadius, 0, mRadius, 50, mScalePaint); &#125; else if (i % 5 == 0) &#123; mScalePaint.setStrokeWidth(3); mScalePaint.setColor(Color.argb(120, 255, 255, 255)); canvas.drawLine(mRadius, 0, mRadius, 30, mScalePaint); &#125; else &#123; mScalePaint.setStrokeWidth(2); mScalePaint.setColor(Color.argb(100, 255, 255, 255)); canvas.drawLine(mRadius, 0, mRadius, 18, mScalePaint); &#125; &#125; RectF f = new RectF(); Calendar calendar = Calendar.getInstance(); int hour = calendar.get(Calendar.HOUR_OF_DAY); int minute = calendar.get(Calendar.MINUTE); int second = calendar.get(Calendar.SECOND); canvas.save(); canvas.rotate(30 * (hour + (minute + second / 60) / 60f), mRadius, mRadius); canvas.drawRoundRect(new RectF(mRadius - 5, mRadius / 3, mRadius + 5, mRadius + 20), 10, 10, mHourPaint); canvas.restore(); canvas.save(); canvas.rotate(6 * (minute + second / 60f), mRadius, mRadius); canvas.drawRoundRect(new RectF(mRadius - 3f, 60, mRadius + 3f, mRadius + 20), 10, 10, mMinutePaint); canvas.restore(); canvas.save(); canvas.rotate(6 * second, mRadius, mRadius); mSecondPaint.setStyle(Paint.Style.FILL); canvas.drawRect(new RectF(mRadius - 2, 50, mRadius + 2, mRadius + 30), mSecondPaint); canvas.restore(); for (int i = 1; i &lt;= 12; i++) &#123; float width = mTextPaint.measureText(String.valueOf(i)); double x = mRadius + (mRadius - 50) * Math.cos((i * 30 - 90) * Math.PI / 180d); double y = mRadius + (mRadius - 50) * Math.sin((i * 30 - 90) * Math.PI / 180d) - width / 2 * Math.sin(i * 30); canvas.drawText(String.valueOf(i), (float) x, (float) y, mTextPaint); &#125; ////////////////////////////////////////////////////////////////////////////////// //x1 = x0 + r * cos(angle * pi / 180) //y1 = y0 + r * sin(angle * pi / 180)// double x = mRadius + (mRadius - 60) * Math.cos((second * 6 - 90) * Math.PI / 180d);// double y = mRadius + (mRadius - 60) * Math.sin((second * 6 - 90) * Math.PI / 180d);//// double tailX = x - (x - mRadius) / RATIO;// double tailY = y - (y - mRadius) / RATIO;//// Path path = new Path();// mSecondPaint.setStyle(Paint.Style.STROKE);// path.moveTo((float) tailX, (float) tailY);// path.lineTo((float) x, (float) y);// canvas.drawPath(path, mSecondPaint); //ä¸­å¿ƒåœ†ç‚¹ mSecondPaint.setStyle(Paint.Style.FILL); canvas.drawCircle(mRadius, mRadius, 6, mSecondPaint); &#125; void setRun(boolean isRun) &#123; this.isRun = isRun; &#125; &#125; public void setRun(boolean isRun) &#123; mDrawThread.setRun(isRun); &#125; public void setRadius(int radius) &#123; this.mRadius = radius; &#125;&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä»¿åŒç¨‹æ—…æ¸¸appäº§å“è¯¦æƒ…é¡µï¼Œå®žçŽ°scrollviewä¸­tabé¡¶éƒ¨æ‚¬åœæ•ˆæžœ]]></title>
      <url>%2F2016%2F10%2F14%2F%E4%BB%BF%E5%90%8C%E7%A8%8B%E6%97%85%E6%B8%B8app%E4%BA%A7%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%EF%BC%8C%E5%AE%9E%E7%8E%B0scrollview%E4%B8%ADtab%E9%A1%B6%E9%83%A8%E6%82%AC%E5%81%9C%E6%95%88%E6%9E%9C%2F</url>
      <content type="text"><![CDATA[#æ•ˆæžœå›¾ #å®žçŽ°æ–¹å¼1.åœ¨é¡¶éƒ¨æ”¾ä¸€ä¸ªä¸Žscrollviewä¸­ç›¸åŒå¸ƒå±€çš„æµ®åŠ¨viewï¼ŒæŽ§åˆ¶æ˜¾ç¤º/éšè—ï¼› 2.view.setTranslationY(translationY)ï¼› å¦‚æžœè¿™ä¸ªæµ®åŠ¨çš„viewæœ‰å¤šç§çŠ¶æ€ï¼ˆç±»ä¼¼tabåˆ‡æ¢è¿™ç§ï¼‰ï¼Œé‚£ä¹ˆæ–¹å¼1å°±æ¯”è¾ƒéº»çƒ¦ï¼Œè¦åŒæ­¥çŠ¶æ€ï¼Œæ‰€ä»¥æœ¬æ–‡æ˜¯ç”¨æ–¹å¼2å®žçŽ°çš„ã€‚ #ä»£ç åˆ†æžè‡ªå®šä¹‰å±žæ€§ï¼Œå¯ä»¥å¯¹ç…§ä¸‹å›¾ç†è§£ï¼š 123456789101112&lt;declare-styleable name="FloatTabScrollView"&gt; &lt;attr name="top_layout" format="reference" /&gt; &lt;attr name="page1_layout" format="reference" /&gt; &lt;attr name="page2_layout" format="reference" /&gt; &lt;attr name="page3_layout" format="reference" /&gt; &lt;attr name="bottom_layout" format="reference" /&gt; &lt;attr name="tab1_title" format="string" /&gt; &lt;attr name="tab2_title" format="string" /&gt; &lt;attr name="tab3_title" format="string" /&gt; &lt;attr name="selected_tab_color" format="color" /&gt; &lt;attr name="unselected_tab_color" format="color" /&gt;&lt;/declare-styleable&gt; åœ¨è‡ªå®šä¹‰çš„FloatTabScrollViewçš„æž„é€ æ–¹æ³•ä¸­inflateä¸€ä¸ªå¸ƒå±€æ–‡ä»¶å’ŒèŽ·å–è‡ªå®šä¹‰å±žæ€§: 123456789101112131415161718192021222324252627282930313233343536373839public FloatTabScrollView(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); mContext = context; inflate(context, R.layout.layout_float_tab_scrollview, this); TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.FloatTabScrollView, 0, 0); if (ta != null) &#123; if (ta.hasValue(R.styleable.FloatTabScrollView_tab1_title)) &#123; mTabTitle1 = ta.getString(R.styleable.FloatTabScrollView_tab1_title); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_tab2_title)) &#123; mTabTitle2 = ta.getString(R.styleable.FloatTabScrollView_tab2_title); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_tab3_title)) &#123; mTabTitle3 = ta.getString(R.styleable.FloatTabScrollView_tab3_title); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_top_layout)) &#123; mTopLayoutId = ta.getResourceId(R.styleable.FloatTabScrollView_top_layout, 0); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_page1_layout)) &#123; mPage1LayoutId = ta.getResourceId(R.styleable.FloatTabScrollView_page1_layout, 0); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_page2_layout)) &#123; mPage2LayoutId = ta.getResourceId(R.styleable.FloatTabScrollView_page2_layout, 0); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_page3_layout)) &#123; mPage3LayoutId = ta.getResourceId(R.styleable.FloatTabScrollView_page3_layout, 0); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_bottom_layout)) &#123; mBottomLayoutId = ta.getResourceId(R.styleable.FloatTabScrollView_bottom_layout, 0); &#125; if (ta.hasValue(R.styleable.FloatTabScrollView_tabline_color)) &#123; tabLineColor = ta.getColor(R.styleable.FloatTabScrollView_tabline_color, 0xFFFF4081); &#125; ta.recycle(); &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;android.support.v4.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:id="@+id/nestedscrollview" android:layout_width="match_parent" android:layout_height="match_parent" android:overScrollMode="never"&gt; &lt;FrameLayout android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;LinearLayout android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical"&gt; &lt;FrameLayout android:id="@+id/fl_top" android:layout_width="match_parent" android:layout_height="wrap_content" /&gt; &lt;!--ç»™tabå ä½çš„view--&gt; &lt;View android:id="@+id/view_tab_holder" android:layout_width="match_parent" android:layout_height="45dp" /&gt; &lt;FrameLayout android:id="@+id/fl_page1" android:layout_width="match_parent" android:layout_height="wrap_content" /&gt; &lt;FrameLayout android:id="@+id/fl_page2" android:layout_width="match_parent" android:layout_height="wrap_content" /&gt; &lt;FrameLayout android:id="@+id/fl_page3" android:layout_width="match_parent" android:layout_height="wrap_content" /&gt; &lt;FrameLayout android:id="@+id/fl_bottom" android:layout_width="match_parent" android:layout_height="wrap_content" /&gt; &lt;/LinearLayout&gt; &lt;!--tab--&gt; &lt;LinearLayout android:id="@+id/ll_tab" android:layout_width="match_parent" android:layout_height="wrap_content" android:background="@android:color/white" android:orientation="vertical"&gt; &lt;LinearLayout android:layout_width="match_parent" android:layout_height="43dp" android:orientation="horizontal"&gt; &lt;TextView android:id="@+id/tv_tab1" android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1" android:gravity="center" tools:text="å•†å“è¯¦æƒ…" /&gt; &lt;TextView android:id="@+id/tv_tab2" android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1" android:gravity="center" tools:text="å•†å“å‚æ•°" /&gt; &lt;TextView android:id="@+id/tv_tab3" android:layout_width="0dp" android:layout_height="match_parent" android:layout_weight="1" android:gravity="center" tools:text="å•†å“æŽ¨è" /&gt; &lt;/LinearLayout&gt; &lt;View android:id="@+id/view_tab_line" android:layout_width="120dp" android:layout_height="2dp" android:background="#FFFF4081" /&gt; &lt;/LinearLayout&gt; &lt;/FrameLayout&gt;&lt;/android.support.v4.widget.NestedScrollView&gt; ScrollViewä¸‹çš„å­å¸ƒå±€å¿…é¡»æ˜¯FrameLayoutæˆ–è€…RelativeLayoutï¼Œåœ¨tabçš„ä½ç½®æ”¾ä¸€ä¸ªå ä½çš„Viewï¼Œå¦‚æžœå ä½viewæ²¡æœ‰åˆ°è¾¾é¡¶éƒ¨ï¼Œåˆ™è®©tabä¸€ç›´æ˜¾ç¤ºåœ¨å ä½viewçš„ä½ç½®ï¼Œå¦‚æžœå ä½viewåˆ°è¾¾äº†é¡¶éƒ¨ï¼Œåˆ™è®©tabâ€œå›ºå®šâ€åœ¨é¡¶éƒ¨ï¼Œä¸ºä»€ä¹ˆâ€œå›ºå®šâ€è¦åŠ å¼•å·ï¼Œå…¶å®žå¹¶ä¸æ˜¯å›ºå®šï¼Œtabä¸€ç›´åœ¨ScrollViewä¸­æ»šåŠ¨ï¼Œåªæ˜¯ç›¸å¯¹é™æ­¢è€Œå·²ã€‚ ç„¶åŽåœ¨onFinishInflateä¸­åŠ è½½æ¯ä¸€å—åŒºåŸŸçš„å¸ƒå±€æ–‡ä»¶ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243@Overrideprotected void onFinishInflate() &#123; super.onFinishInflate(); mTopContainerFL = (FrameLayout) findViewById(R.id.fl_top); mPage1ContainerFL = (FrameLayout) findViewById(R.id.fl_page1); mPage2ContainerFL = (FrameLayout) findViewById(R.id.fl_page2); mPage3ContainerFL = (FrameLayout) findViewById(R.id.fl_page3); mBottomContainerFL = (FrameLayout) findViewById(R.id.fl_bottom); inflate(mContext, mTopLayoutId, mTopContainerFL); inflate(mContext, mPage1LayoutId, mPage1ContainerFL); inflate(mContext, mPage2LayoutId, mPage2ContainerFL); inflate(mContext, mPage3LayoutId, mPage3ContainerFL); inflate(mContext, mBottomLayoutId, mBottomContainerFL); mTabHolderView = findViewById(R.id.view_tab_holder); mTabLL = (LinearLayout) findViewById(R.id.ll_tab); mTabLine = findViewById(R.id.view_tab_line); mTabLine.setBackgroundColor(tabLineColor); mTabTV1 = (TextView) findViewById(R.id.tv_tab1); mTabTV2 = (TextView) findViewById(R.id.tv_tab2); mTabTV3 = (TextView) findViewById(R.id.tv_tab3); mTabTV1.setText(mTabTitle1); mTabTV2.setText(mTabTitle2); mTabTV3.setText(mTabTitle3); mTabTV1.setOnClickListener(this); mTabTV2.setOnClickListener(this); mTabTV3.setOnClickListener(this); getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() &#123; @Override public void onGlobalLayout() &#123; setTabViewPosition(0); if (bGradient) &#123; mToolbar.getBackground().setAlpha(MIN_ALPHA); &#125; getViewTreeObserver().removeGlobalOnLayoutListener(this); &#125; &#125;);&#125; è¦†å†™onScrollChangedæ–¹æ³•æ¥å¹³ç§»tabçš„ä½ç½®ï¼š 1234567891011@Overrideprotected void onScrollChanged(int scrollX, int scrollY, int oldScrollX, int oldScrollY) &#123; super.onScrollChanged(scrollX, scrollY, oldScrollX, oldScrollY); setTabViewPosition(scrollY); if (bGradient) &#123; float alpha = scrollY / (float) (mTabHolderView.getTop() - mToolbar.getHeight()) * MAX_ALPHA; mToolbar.getBackground().setAlpha(Math.min((int) alpha, MAX_ALPHA)); &#125;&#125; 1234567891011121314151617181920private void setTabViewPosition(int scrollY) &#123; if (scrollY &lt;= mPage3ContainerFL.getTop() + mPage3ContainerFL.getHeight() - mTabLL.getHeight()) &#123; //è®¾ç½®tabviewåœ¨scrollviewä¸­çš„ä½ç½® mTabLL.setTranslationY(Math.max(scrollY + (mToolbar != null ? mToolbar.getHeight() : 0), mTabHolderView.getTop())); //æ»šåŠ¨è¿‡ç¨‹ä¸­åˆ‡æ¢tabçš„é€‰ä¸­çŠ¶æ€ if (scrollY &lt; mPage2ContainerFL.getTop() - mTabLL.getHeight() - (mToolbar != null ? mToolbar.getHeight() : 0)) &#123; selectTab(0); &#125; else if (scrollY &gt;= mPage2ContainerFL.getTop() - mTabLL.getHeight() - (mToolbar != null ? mToolbar.getHeight() : 0) &amp;&amp; scrollY &lt; mPage3ContainerFL.getTop() - mTabLL.getHeight() - (mToolbar != null ? mToolbar.getHeight() : 0)) &#123; selectTab(1); &#125; else if (scrollY &gt;= mPage3ContainerFL.getTop() - mTabLL.getHeight() - (mToolbar != null ? mToolbar.getHeight() : 0)) &#123; selectTab(2); &#125; &#125; else &#123; //è¶…è¿‡æœ€å¤§é«˜åº¦ä¹‹åŽ,æŠŠtabviewè®¾ç½®åœ¨åŽŸå§‹ä½ç½®,,,,,,ä¹Ÿå¯ä»¥ä¸è®¾ç½® mTabLL.setTranslationY(mTabHolderView.getTop()); &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839private void selectTab(int index) &#123; if (mTabLineAnimator == null) &#123; mTabLineAnimator = new ValueAnimator(); mTabLineAnimator.setDuration(DEFAULT_DURATION); mTabLineAnimator.setInterpolator(new FastOutSlowInInterpolator()); mTabLineAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animation) &#123; mTabLine.setTranslationX((int) animation.getAnimatedValue()); &#125; &#125;); &#125; int curTabLineX = (int) mTabLine.getX(); int needTabLineX = 0; switch (index) &#123; case 0: needTabLineX = 0; break; case 1: needTabLineX = mTabLL.getWidth() / 3; break; case 2: needTabLineX = mTabLL.getWidth() / 3 * 2; break; default: break; &#125; if (curTabLineX == needTabLineX) &#123; return; &#125; mTabLineAnimator.setIntValues(curTabLineX, needTabLineX); if (!mTabLineAnimator.isRunning()) &#123; mTabLineAnimator.start(); &#125;&#125; #é¡¹ç›®åœ°å€https://github.com/panda912/FloatTabScrollView]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[gradleä½¿ç”¨excludeç§»é™¤é‡å¤ä¾èµ–]]></title>
      <url>%2F2016%2F09%2F20%2Fgradle%E4%BD%BF%E7%94%A8exclude%E7%A7%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E4%BE%9D%E8%B5%96%2F</url>
      <content type="text"><![CDATA[exclude+â€” com.android.support:design:24.2.1 | +â€” com.android.support:support-v4:24.2.1 (*) | +â€” com.android.support:appcompat-v7:24.2.1 (*) | \ â€” com.android.support:recyclerview-v7:24.2.1 | +â€” com.android.support:support-annotations:24.2.1 | +â€” com.android.support:support-compat:24.2.1 (*) | \ â€” com.android.support:support-core-ui:24.2.1 (*) ä¸Šé¢æ˜¯com.android.support:design:24.2.1çš„ä¾èµ–å…³ç³»ï¼Œå¦‚æžœé¡¹ç›®å·²ç»ä¾èµ–äº†com.android.support:support-v4:24.2.1ï¼Œé‚£ä¹ˆå°±å¯ä»¥å§designåŒ…ä¸­çš„support-v4ç§»é™¤ã€‚ compile(&apos;com.android.support:design:24.2.1&apos;) { exclude group: &apos;com.android.support&apos;, module: &apos;support-v4&apos; } groupå¯¹åº”com.android.supportï¼Œ moduleå¯¹åº”support-v4ï¼Œå¦‚æžœåªå†™groupï¼Œä¸å†™moduleï¼Œé‚£ä¹ˆå°†ä¼šç§»é™¤designåŒ…ä¸‹æ‰€æœ‰ä¸Žgroupå¯¹åº”çš„åŒ…ã€‚ transitiveç”¨äºŽè‡ªåŠ¨å¤„ç†å­ä¾èµ–é¡¹ã€‚é»˜è®¤ä¸º trueï¼Œgradle è‡ªåŠ¨æ·»åŠ å­ä¾èµ–é¡¹ï¼›è®¾ç½®ä¸º falseï¼Œåˆ™éœ€è¦æ‰‹åŠ¨æ·»åŠ æ¯ä¸ªä¾èµ–é¡¹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[gradleå¸¸ç”¨å‘½ä»¤]]></title>
      <url>%2F2016%2F09%2F20%2Fgradle%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
      <content type="text"><![CDATA[æŸ¥çœ‹ä¾èµ–æ ‘æŸ¥çœ‹æ‰€æœ‰ä¾èµ–æ ‘gradle -q app:dependencies 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708panda:Gank panda$ gradle -q app:dependencies------------------------------------------------------------Project :app------------------------------------------------------------_debugAndroidTestAnnotationProcessor - ## Internal use, do not manually configure ##No dependencies_debugAndroidTestApk - ## Internal use, do not manually configure ##No dependencies_debugAndroidTestCompile - ## Internal use, do not manually configure ##No dependencies_debugAnnotationProcessor - ## Internal use, do not manually configure ##No dependencies_debugApk - ## Internal use, do not manually configure ##+--- io.realm:realm-annotations:2.0.0+--- com.android.support:appcompat-v7:24.2.1 -&gt; 25.0.0| +--- com.android.support:support-v4:25.0.0| | +--- com.android.support:support-compat:25.0.0| | | \--- com.android.support:support-annotations:25.0.0| | +--- com.android.support:support-media-compat:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-utils:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | \--- com.android.support:support-fragment:25.0.0| | +--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-media-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0 (*)| | \--- com.android.support:support-core-utils:25.0.0 (*)| +--- com.android.support:support-vector-drawable:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:animated-vector-drawable:25.0.0| \--- com.android.support:support-vector-drawable:25.0.0 (*)+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:support-core-ui:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6+--- io.realm:realm-android-library:2.0.0| +--- io.realm:realm-annotations:2.0.0| \--- com.getkeepsafe.relinker:relinker:1.2.2+--- project :widget| +--- com.android.support:appcompat-v7:25.0.0 (*)| +--- com.android.support:design:25.0.0| | +--- com.android.support:support-v4:25.0.0 (*)| | +--- com.android.support:appcompat-v7:25.0.0 (*)| | +--- com.android.support:recyclerview-v7:25.0.0 (*)| | \--- com.android.support:transition:25.0.0| | \--- com.android.support:support-v4:25.0.0 (*)| \--- com.google.android:flexbox:0.2.3| \--- com.android.support:appcompat-v7:23.3.0 -&gt; 25.0.0 (*)\--- com.squareup.leakcanary:leakcanary-android:1.4 \--- com.squareup.leakcanary:leakcanary-analyzer:1.4 +--- com.squareup.haha:haha:2.0.3 \--- com.squareup.leakcanary:leakcanary-watcher:1.4_debugCompile - ## Internal use, do not manually configure ##+--- io.realm:realm-annotations:2.0.0+--- com.android.support:appcompat-v7:24.2.1 -&gt; 25.0.0| +--- com.android.support:support-v4:25.0.0| | +--- com.android.support:support-compat:25.0.0| | | \--- com.android.support:support-annotations:25.0.0| | +--- com.android.support:support-media-compat:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-utils:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | \--- com.android.support:support-fragment:25.0.0| | +--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-media-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0 (*)| | \--- com.android.support:support-core-utils:25.0.0 (*)| +--- com.android.support:support-vector-drawable:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:animated-vector-drawable:25.0.0| \--- com.android.support:support-vector-drawable:25.0.0 (*)+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:support-core-ui:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6+--- io.realm:realm-android-library:2.0.0| +--- io.realm:realm-annotations:2.0.0| \--- com.getkeepsafe.relinker:relinker:1.2.2+--- project :widget| +--- com.android.support:appcompat-v7:25.0.0 (*)| +--- com.android.support:design:25.0.0| | +--- com.android.support:support-v4:25.0.0 (*)| | +--- com.android.support:appcompat-v7:25.0.0 (*)| | +--- com.android.support:recyclerview-v7:25.0.0 (*)| | \--- com.android.support:transition:25.0.0| | \--- com.android.support:support-v4:25.0.0 (*)| \--- com.google.android:flexbox:0.2.3| \--- com.android.support:appcompat-v7:23.3.0 -&gt; 25.0.0 (*)\--- com.squareup.leakcanary:leakcanary-android:1.4 \--- com.squareup.leakcanary:leakcanary-analyzer:1.4 +--- com.squareup.haha:haha:2.0.3 \--- com.squareup.leakcanary:leakcanary-watcher:1.4_debugUnitTestAnnotationProcessor - ## Internal use, do not manually configure ##No dependencies_debugUnitTestApk - ## Internal use, do not manually configure ##\--- junit:junit:4.12 \--- org.hamcrest:hamcrest-core:1.3_debugUnitTestCompile - ## Internal use, do not manually configure ##\--- junit:junit:4.12 \--- org.hamcrest:hamcrest-core:1.3_releaseAnnotationProcessor - ## Internal use, do not manually configure ##No dependencies_releaseApk - ## Internal use, do not manually configure ##+--- io.realm:realm-annotations:2.0.0+--- com.android.support:appcompat-v7:24.2.1 -&gt; 25.0.0| +--- com.android.support:support-v4:25.0.0| | +--- com.android.support:support-compat:25.0.0| | | \--- com.android.support:support-annotations:25.0.0| | +--- com.android.support:support-media-compat:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-utils:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | \--- com.android.support:support-fragment:25.0.0| | +--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-media-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0 (*)| | \--- com.android.support:support-core-utils:25.0.0 (*)| +--- com.android.support:support-vector-drawable:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:animated-vector-drawable:25.0.0| \--- com.android.support:support-vector-drawable:25.0.0 (*)+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:support-core-ui:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6+--- io.realm:realm-android-library:2.0.0| +--- io.realm:realm-annotations:2.0.0| \--- com.getkeepsafe.relinker:relinker:1.2.2+--- project :widget| +--- com.android.support:appcompat-v7:25.0.0 (*)| +--- com.android.support:design:25.0.0| | +--- com.android.support:support-v4:25.0.0 (*)| | +--- com.android.support:appcompat-v7:25.0.0 (*)| | +--- com.android.support:recyclerview-v7:25.0.0 (*)| | \--- com.android.support:transition:25.0.0| | \--- com.android.support:support-v4:25.0.0 (*)| \--- com.google.android:flexbox:0.2.3| \--- com.android.support:appcompat-v7:23.3.0 -&gt; 25.0.0 (*)\--- com.squareup.leakcanary:leakcanary-android-no-op:1.4_releaseCompile - ## Internal use, do not manually configure ##+--- io.realm:realm-annotations:2.0.0+--- com.android.support:appcompat-v7:24.2.1 -&gt; 25.0.0| +--- com.android.support:support-v4:25.0.0| | +--- com.android.support:support-compat:25.0.0| | | \--- com.android.support:support-annotations:25.0.0| | +--- com.android.support:support-media-compat:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-utils:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | \--- com.android.support:support-fragment:25.0.0| | +--- com.android.support:support-compat:25.0.0 (*)| | +--- com.android.support:support-media-compat:25.0.0 (*)| | +--- com.android.support:support-core-ui:25.0.0 (*)| | \--- com.android.support:support-core-utils:25.0.0 (*)| +--- com.android.support:support-vector-drawable:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:animated-vector-drawable:25.0.0| \--- com.android.support:support-vector-drawable:25.0.0 (*)+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| \--- com.android.support:support-core-ui:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6+--- io.realm:realm-android-library:2.0.0| +--- io.realm:realm-annotations:2.0.0| \--- com.getkeepsafe.relinker:relinker:1.2.2+--- project :widget| +--- com.android.support:appcompat-v7:25.0.0 (*)| +--- com.android.support:design:25.0.0| | +--- com.android.support:support-v4:25.0.0 (*)| | +--- com.android.support:appcompat-v7:25.0.0 (*)| | +--- com.android.support:recyclerview-v7:25.0.0 (*)| | \--- com.android.support:transition:25.0.0| | \--- com.android.support:support-v4:25.0.0 (*)| \--- com.google.android:flexbox:0.2.3| \--- com.android.support:appcompat-v7:23.3.0 -&gt; 25.0.0 (*)\--- com.squareup.leakcanary:leakcanary-android-no-op:1.4_releaseUnitTestAnnotationProcessor - ## Internal use, do not manually configure ##No dependencies_releaseUnitTestApk - ## Internal use, do not manually configure ##\--- junit:junit:4.12 \--- org.hamcrest:hamcrest-core:1.3_releaseUnitTestCompile - ## Internal use, do not manually configure ##\--- junit:junit:4.12 \--- org.hamcrest:hamcrest-core:1.3androidJacocoAgent - The Jacoco agent to use to get coverage data.\--- org.jacoco:org.jacoco.agent:0.7.5.201505241946androidJacocoAnt - The Jacoco ant tasks to use to get execute Gradle tasks.\--- org.jacoco:org.jacoco.ant:0.7.5.201505241946 +--- org.jacoco:org.jacoco.core:0.7.5.201505241946 | \--- org.ow2.asm:asm-debug-all:5.0.1 +--- org.jacoco:org.jacoco.report:0.7.5.201505241946 | +--- org.jacoco:org.jacoco.core:0.7.5.201505241946 (*) | \--- org.ow2.asm:asm-debug-all:5.0.1 \--- org.jacoco:org.jacoco.agent:0.7.5.201505241946androidTestAnnotationProcessor - Classpath for the annotation processor for &apos;androidTest&apos;.No dependenciesandroidTestApk - Classpath packaged with the compiled &apos;androidTest&apos; classes.No dependenciesandroidTestApt+--- io.realm:realm-annotations:2.0.0\--- io.realm:realm-annotations-processor:2.0.0 +--- com.squareup:javawriter:2.5.0 \--- io.realm:realm-annotations:2.0.0androidTestCompile - Classpath for compiling the androidTest sources.No dependenciesandroidTestProvided - Classpath for only compiling the androidTest sources.No dependenciesandroidTestWearApp - Link to a wear app to embed for object &apos;androidTest&apos;.No dependenciesannotationProcessor - Classpath for the annotation processor for &apos;main&apos;.No dependenciesapk - Classpath packaged with the compiled &apos;main&apos; classes.No dependenciesapt+--- io.realm:realm-annotations:2.0.0+--- io.realm:realm-annotations-processor:2.0.0| +--- com.squareup:javawriter:2.5.0| \--- io.realm:realm-annotations:2.0.0+--- com.jakewharton:butterknife-compiler:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| +--- com.google.auto:auto-common:0.6| | \--- com.google.guava:guava:18.0| +--- com.google.auto.service:auto-service:1.0-rc2| | +--- com.google.auto:auto-common:0.3 -&gt; 0.6 (*)| | \--- com.google.guava:guava:18.0| \--- com.squareup:javapoet:1.7.0+--- com.android.support:appcompat-v7:24.2.1| \--- com.android.support:animated-vector-drawable:24.2.1+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0| | \--- com.android.support:support-annotations:25.0.0| \--- com.android.support:support-core-ui:25.0.0| \--- com.android.support:support-compat:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-media-compat:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-core-utils:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-core-ui:25.0.0 (*)| \--- com.android.support:support-fragment:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-media-compat:25.0.0 (*)| +--- com.android.support:support-core-ui:25.0.0 (*)| \--- com.android.support:support-core-utils:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0 (*)| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6\--- io.realm:realm-android-library:2.0.0 +--- io.realm:realm-annotations:2.0.0 \--- com.getkeepsafe.relinker:relinker:1.2.2archives - Configuration for archive artifacts.No dependenciescompile - Classpath for compiling the main sources.+--- io.realm:realm-annotations:2.0.0+--- com.android.support:appcompat-v7:24.2.1| \--- com.android.support:animated-vector-drawable:24.2.1+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0| | \--- com.android.support:support-annotations:25.0.0| \--- com.android.support:support-core-ui:25.0.0| \--- com.android.support:support-compat:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-media-compat:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-core-utils:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-core-ui:25.0.0 (*)| \--- com.android.support:support-fragment:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-media-compat:25.0.0 (*)| +--- com.android.support:support-core-ui:25.0.0 (*)| \--- com.android.support:support-core-utils:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6\--- io.realm:realm-android-library:2.0.0 +--- io.realm:realm-annotations:2.0.0 \--- com.getkeepsafe.relinker:relinker:1.2.2debugAnnotationProcessor - Classpath for the annotation processor for &apos;debug&apos;.No dependenciesdebugApk - Classpath packaged with the compiled &apos;debug&apos; classes.No dependenciesdebugCompile - Classpath for compiling the debug sources.+--- project :widget| +--- com.android.support:appcompat-v7:25.0.0| | +--- com.android.support:support-v4:25.0.0| | | +--- com.android.support:support-compat:25.0.0| | | | \--- com.android.support:support-annotations:25.0.0| | | +--- com.android.support:support-media-compat:25.0.0| | | | \--- com.android.support:support-compat:25.0.0 (*)| | | +--- com.android.support:support-core-utils:25.0.0| | | | \--- com.android.support:support-compat:25.0.0 (*)| | | +--- com.android.support:support-core-ui:25.0.0| | | | \--- com.android.support:support-compat:25.0.0 (*)| | | \--- com.android.support:support-fragment:25.0.0| | | +--- com.android.support:support-compat:25.0.0 (*)| | | +--- com.android.support:support-media-compat:25.0.0 (*)| | | +--- com.android.support:support-core-ui:25.0.0 (*)| | | \--- com.android.support:support-core-utils:25.0.0 (*)| | +--- com.android.support:support-vector-drawable:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | \--- com.android.support:animated-vector-drawable:25.0.0| | \--- com.android.support:support-vector-drawable:25.0.0 (*)| +--- com.android.support:design:25.0.0| | +--- com.android.support:support-v4:25.0.0 (*)| | +--- com.android.support:appcompat-v7:25.0.0 (*)| | +--- com.android.support:recyclerview-v7:25.0.0| | | +--- com.android.support:support-annotations:25.0.0| | | +--- com.android.support:support-compat:25.0.0 (*)| | | \--- com.android.support:support-core-ui:25.0.0 (*)| | \--- com.android.support:transition:25.0.0| | \--- com.android.support:support-v4:25.0.0 (*)| \--- com.google.android:flexbox:0.2.3| \--- com.android.support:appcompat-v7:23.3.0 -&gt; 25.0.0 (*)\--- com.squareup.leakcanary:leakcanary-android:1.4 \--- com.squareup.leakcanary:leakcanary-analyzer:1.4 +--- com.squareup.haha:haha:2.0.3 \--- com.squareup.leakcanary:leakcanary-watcher:1.4debugProvided - Classpath for only compiling the debug sources.No dependenciesdebugWearApp - Link to a wear app to embed for object &apos;debug&apos;.No dependenciesdefault - Configuration for default artifacts.No dependenciesdefault-mapping - Configuration for default mapping artifacts.No dependenciesdefault-metadata - Metadata for the produced APKs.No dependenciesprovided - Classpath for only compiling the main sources.No dependenciesreleaseAnnotationProcessor - Classpath for the annotation processor for &apos;release&apos;.No dependenciesreleaseApk - Classpath packaged with the compiled &apos;release&apos; classes.No dependenciesreleaseCompile - Classpath for compiling the release sources.+--- project :widget| +--- com.android.support:appcompat-v7:25.0.0| | +--- com.android.support:support-v4:25.0.0| | | +--- com.android.support:support-compat:25.0.0| | | | \--- com.android.support:support-annotations:25.0.0| | | +--- com.android.support:support-media-compat:25.0.0| | | | \--- com.android.support:support-compat:25.0.0 (*)| | | +--- com.android.support:support-core-utils:25.0.0| | | | \--- com.android.support:support-compat:25.0.0 (*)| | | +--- com.android.support:support-core-ui:25.0.0| | | | \--- com.android.support:support-compat:25.0.0 (*)| | | \--- com.android.support:support-fragment:25.0.0| | | +--- com.android.support:support-compat:25.0.0 (*)| | | +--- com.android.support:support-media-compat:25.0.0 (*)| | | +--- com.android.support:support-core-ui:25.0.0 (*)| | | \--- com.android.support:support-core-utils:25.0.0 (*)| | +--- com.android.support:support-vector-drawable:25.0.0| | | \--- com.android.support:support-compat:25.0.0 (*)| | \--- com.android.support:animated-vector-drawable:25.0.0| | \--- com.android.support:support-vector-drawable:25.0.0 (*)| +--- com.android.support:design:25.0.0| | +--- com.android.support:support-v4:25.0.0 (*)| | +--- com.android.support:appcompat-v7:25.0.0 (*)| | +--- com.android.support:recyclerview-v7:25.0.0| | | +--- com.android.support:support-annotations:25.0.0| | | +--- com.android.support:support-compat:25.0.0 (*)| | | \--- com.android.support:support-core-ui:25.0.0 (*)| | \--- com.android.support:transition:25.0.0| | \--- com.android.support:support-v4:25.0.0 (*)| \--- com.google.android:flexbox:0.2.3| \--- com.android.support:appcompat-v7:23.3.0 -&gt; 25.0.0 (*)\--- com.squareup.leakcanary:leakcanary-android-no-op:1.4releaseProvided - Classpath for only compiling the release sources.No dependenciesreleaseWearApp - Link to a wear app to embed for object &apos;release&apos;.No dependenciesretrolambdaConfig\--- net.orfjackal.retrolambda:retrolambda:2.1.0testAnnotationProcessor - Classpath for the annotation processor for &apos;test&apos;.No dependenciestestApk - Classpath packaged with the compiled &apos;test&apos; classes.No dependenciestestApt\--- junit:junit:4.12 \--- org.hamcrest:hamcrest-core:1.3testCompile - Classpath for compiling the test sources.\--- junit:junit:4.12 \--- org.hamcrest:hamcrest-core:1.3testDebugAnnotationProcessor - Classpath for the annotation processor for &apos;testDebug&apos;.No dependenciestestDebugApk - Classpath packaged with the compiled &apos;testDebug&apos; classes.No dependenciestestDebugCompile - Classpath for compiling the testDebug sources.No dependenciestestDebugProvided - Classpath for only compiling the testDebug sources.No dependenciestestDebugWearApp - Link to a wear app to embed for object &apos;testDebug&apos;.No dependenciestestProvided - Classpath for only compiling the test sources.No dependenciestestReleaseAnnotationProcessor - Classpath for the annotation processor for &apos;testRelease&apos;.No dependenciestestReleaseApk - Classpath packaged with the compiled &apos;testRelease&apos; classes.No dependenciestestReleaseCompile - Classpath for compiling the testRelease sources.No dependenciestestReleaseProvided - Classpath for only compiling the testRelease sources.No dependenciestestReleaseWearApp - Link to a wear app to embed for object &apos;testRelease&apos;.No dependenciestestWearApp - Link to a wear app to embed for object &apos;test&apos;.No dependencieswearApp - Link to a wear app to embed for object &apos;main&apos;.No dependencies æŸ¥çœ‹æŒ‡å®šä¾èµ–æ ‘gradle -q app:dependencies --configuration debug 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071panda:Gank panda$ gradle -q app:dependencies --configuration compile------------------------------------------------------------Project :app------------------------------------------------------------compile - Classpath for compiling the main sources.+--- io.realm:realm-annotations:2.0.0+--- com.android.support:appcompat-v7:24.2.1| \--- com.android.support:animated-vector-drawable:24.2.1+--- com.android.support:recyclerview-v7:25.0.0| +--- com.android.support:support-annotations:25.0.0| +--- com.android.support:support-compat:25.0.0| | \--- com.android.support:support-annotations:25.0.0| \--- com.android.support:support-core-ui:25.0.0| \--- com.android.support:support-compat:25.0.0 (*)+--- com.github.CymChad:BaseRecyclerViewAdapterHelper:2.2.9+--- com.youzan:titan:0.2.5| \--- com.android.support:recyclerview-v7:23.3.0 -&gt; 25.0.0 (*)+--- com.android.support:customtabs:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.squareup.okhttp3:logging-interceptor:3.4.1+--- com.squareup.retrofit2:retrofit:2.1.0+--- com.squareup.retrofit2:converter-gson:2.1.0| \--- com.google.code.gson:gson:2.7+--- com.squareup.retrofit2:adapter-rxjava:2.1.0| \--- io.reactivex:rxjava:1.1.5 -&gt; 1.1.6+--- jp.wasabeef:picasso-transformations:2.1.0+--- io.reactivex:rxandroid:1.2.1+--- xiaofei.library:hermes-eventbus:0.2.0| +--- xiaofei.library:concurrent-utils:0.1.4| +--- org.greenrobot:eventbus:3.0.0| \--- xiaofei.library:hermes:0.6.1+--- com.facebook.stetho:stetho-okhttp3:1.4.1| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.android.support:support-v4:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-media-compat:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-core-utils:25.0.0| | \--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-core-ui:25.0.0 (*)| \--- com.android.support:support-fragment:25.0.0| +--- com.android.support:support-compat:25.0.0 (*)| +--- com.android.support:support-media-compat:25.0.0 (*)| +--- com.android.support:support-core-ui:25.0.0 (*)| \--- com.android.support:support-core-utils:25.0.0 (*)+--- com.android.support:cardview-v7:25.0.0| \--- com.android.support:support-annotations:25.0.0+--- com.jakewharton:butterknife:8.3.0| +--- com.jakewharton:butterknife-annotations:8.3.0| | \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0| \--- com.android.support:support-annotations:24.1.0 -&gt; 25.0.0+--- org.jsoup:jsoup:1.9.2+--- com.google.code.gson:gson:2.7+--- com.squareup.okhttp3:okhttp:3.4.1| \--- com.squareup.okio:okio:1.9.0+--- com.squareup.picasso:picasso:2.5.2+--- io.reactivex:rxjava:1.1.6+--- com.tencent.bugly:crashreport:2.2.2+--- com.facebook.stetho:stetho:1.4.1| +--- commons-cli:commons-cli:1.2| \--- com.google.code.findbugs:jsr305:2.0.1+--- com.facebook.stetho:stetho-js-rhino:1.4.1| +--- com.google.code.findbugs:jsr305:2.0.1| \--- org.mozilla:rhino:1.7.6\--- io.realm:realm-android-library:2.0.0 +--- io.realm:realm-annotations:2.0.0 \--- com.getkeepsafe.relinker:relinker:1.2.2(*) - dependencies omitted (listed previously) æž„å»ºå…ˆäº†è§£å‡ ä¸ªæ¦‚å¿µ: Build Type: æž„å»ºç±»åž‹ã€‚ä¸€èˆ¬æ˜¯ debug å’Œ releaseï¼Œä¹Ÿå¯ä»¥åœ¨ module çš„ build.gradle ä¸­è‡ªå®šä¹‰ï¼š 123456789101112131415161718192021222324android &#123; ...... ...... buildTypes &#123; debug &#123; buildConfigField "String", "API_HOST", '"http://gank.io/api/"' debuggable true minifyEnabled false shrinkResources false zipAlignEnabled false signingConfig signingConfigs.debug &#125; release &#123; buildConfigField "String", "API_HOST", '"http://gank.io/api/"' minifyEnabled true shrinkResources true zipAlignEnabled true signingConfig signingConfigs.release proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; &#125; ...... ......&#125; Product Flavor: æ¸ é“å æ¯”å¦‚ä¸‹é¢æˆ‘ä»¬é…ç½®çš„yingyongbaoã€wandoujiaã€beta 1234567891011121314productFlavors &#123; yingyongbao &#123; applicationId "com.sgb.gank" manifestPlaceholders = [APP_NAME: "Gank", CHANNEL_VALUE: 'yingyongbao', CHANNEL_ID: 1] &#125; wandoujia &#123; applicationId "com.sgb.gank" manifestPlaceholders = [APP_NAME: "Gank", CHANNEL_VALUE: 'wandoujia', CHANNEL_ID: 2] &#125; beta &#123; applicationId "com.sgb.gank.beta" manifestPlaceholders = [APP_NAME: "Gank.beta"] &#125;&#125; Build Variant: Product Flavorå’ŒBuild Typeçš„æŽ’åˆ—ç»„åˆ` assemble+BuildType./gradlew assembleRelease æž„å»ºæ‰€æœ‰æ¸ é“çš„ release ç‰ˆæœ¬ assemble+ProductFlavor./gradlew assembleYingyongbao æž„å»ºæŒ‡å®šæ¸ é“çš„æ‰€æœ‰ Build Type ç‰ˆæœ¬ asselmbe+BuildVariant./gradlew assembleYingyongbaoRelease æž„å»ºæŒ‡å®šæ¸ é“çš„æŒ‡å®šç‰ˆæœ¬ æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[libraryä¸­BuildConfig.DEBUGå§‹ç»ˆä¸ºfalseçš„è§£å†³æ–¹æ³•]]></title>
      <url>%2F2016%2F09%2F02%2Flibrary%E4%B8%ADBuildConfig-DEBUG%E5%A7%8B%E7%BB%88%E4%B8%BAfalse%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%2F</url>
      <content type="text"><![CDATA[å‚è€ƒï¼š http://stackoverflow.com/questions/20176284/buildconfig-debug-always-false-when-building-library-projects-with-gradle# ä¿®æ”¹é»˜è®¤çš„å‘å¸ƒé…ç½®é€šè¿‡ android.publishNonDefault = true å¯ç”¨å…¶ä»–variantsçš„å‘å¸ƒ é€šè¿‡ compile project(path: â€˜:projectâ€™, configuration: â€˜flavor1Debugâ€™) å¼•ç”¨æŒ‡å®šçš„variant library module : 123android &#123; publishNonDefault true&#125; app module: 1234dependencies &#123; debugCompile project(path: ':library', configuration: 'debug') releaseCompile project(path: ':library', configuration: 'release')&#125; è‡ªå®šä¹‰buildconfig field library module: 12345678910android &#123; buildTypes &#123; debug &#123; buildConfigField "boolean", "LOG_DEBUG", "true" &#125; release &#123; buildConfigField "boolean", "LOG_DEBUG", "false" &#125; &#125;&#125; java code 123if (BuildConfig.LOG_DEBUG) &#123; // TODO&#125; ReBuildä¹‹åŽä½ ä¼šå‘çŽ°debugå’Œreleaseæ¨¡å¼ä¸‹BuildConfigä¸­LOG_DEBUGçš„å€¼æ˜¯ä¸åŒçš„ã€‚ è¿™ç§æ–¹å¼ä¸ä»…ç”¨ä¸Žæ­¤ï¼Œä½ è¿˜å¯ä»¥æ·»åŠ å…¶ä»–çš„å­—æ®µï¼Œæ¯”å¦‚debugå’Œreleaseæ¨¡å¼ä¸‹ä¸åŒçš„API base urlï¼Œç­‰ç­‰ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hexoæ­å»ºä»¥åŠå¤šssh keyé—®é¢˜è§£å†³]]></title>
      <url>%2F2016%2F05%2F14%2FHexo%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%A4%9Assh-key%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%2F</url>
      <content type="text"></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>%2F2016%2F05%2F14%2Fhello-world%2F</url>
      <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment å¸¸è§é—®é¢˜å¦‚æžœä¿®æ”¹é…ç½®æ–‡ä»¶æäº¤ä¸ä¸ŠåŽ»ï¼Œå°±åˆ é™¤æ ¹ç›®å½•ä¸‹çš„.deploy_gitæ–‡ä»¶ï¼Œé‡æ–°hexo g -d]]></content>
    </entry>

    
  
  
</search>
